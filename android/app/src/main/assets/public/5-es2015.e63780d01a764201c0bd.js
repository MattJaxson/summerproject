(window.webpackJsonp=window.webpackJsonp||[]).push([[5,66],{"84P7":function(t,o,e){"use strict";e.d(o,"a",function(){return h});var n=e("mrSG"),s=e("Aso2"),i=e("ENZJ"),r=e("2Vo4"),c=e("fXoL"),l=e("tyNb"),a=e("TEn/"),p=e("ofXK");function u(t,o){if(1&t){const t=c.Nb();c.Mb(0,"ion-button",5),c.Ub("click",function(){c.fc(t);const o=c.Wb();return o.follow(o.postID)}),c.lc(1),c.Lb()}if(2&t){const t=c.Wb();c.xb(1),c.nc("Follow (",t.followingLength,") ")}}function b(t,o){if(1&t){const t=c.Nb();c.Mb(0,"ion-button",6),c.Ub("click",function(){c.fc(t);const o=c.Wb();return o.unFollow(o.postID)}),c.lc(1),c.Lb()}if(2&t){const t=c.Wb();c.xb(1),c.nc("Unfollow (",t.followingLength,") ")}}let h=(()=>{class t{constructor(t,o,e,n){this.router=t,this.posts=o,this.profile=e,this.toast=n,this.comments=[],this.followers=[],this.following=!1,this.followingLength$=new r.a(null),this.followingLength=null}ngOnInit(){this.posts.getPostInfo(this.postID).subscribe(t=>{let o=t.comments,e=t.followers,n=!1;this.profile.getUserDetails().subscribe(t=>{let s=t.email;if(e.find(function(t){t===s&&(n=!0)}),s===this.postEmail)return!0===this.isUser;this.followers=e,this.comments=o,this.userEmail=s,this.following=n,this.followingLength$.next(e.length),this.followingLength$.subscribe(t=>{this.followingLength=t})})})}follow(t){return Object(n.a)(this,void 0,void 0,function*(){yield console.log("Following Post"),yield console.log(t),yield this.posts.followPost(t,this.userEmail),this.following=!0,this.followingLength$.next(this.followingLength+1),yield this.followToast()})}followToast(){return Object(n.a)(this,void 0,void 0,function*(){(yield this.toast.create({cssClass:"followed-toast",message:"You are FOLLOWING this post",duration:2e3})).present()})}unFollow(t){return Object(n.a)(this,void 0,void 0,function*(){yield console.log("Unfollowing Post"),yield console.log(t),yield this.posts.unFollowPost(t,this.userEmail),this.following=!1,this.followingLength$.next(this.followingLength-1),yield this.unFollowToast()})}unFollowToast(){return Object(n.a)(this,void 0,void 0,function*(){(yield this.toast.create({cssClass:"unfollowed-toast",message:"You are UNFOLLOWING this post",duration:2e3})).present()})}postPage(){this.router.navigate(["/home/posts/post-page",this.postID])}}return t.\u0275fac=function(o){return new(o||t)(c.Hb(l.f),c.Hb(i.a),c.Hb(s.a),c.Hb(a.Z))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-follow-comment-buttons"]],inputs:{postID:"postID",isUser:"isUser",postEmail:"postEmail"},decls:5,vars:2,consts:[[2,"--background","none"],["slot","end"],["class","follow-button",3,"click",4,"ngIf"],["class","unfollow-button",3,"click",4,"ngIf"],["slot","start","src","../../assets/icons/comments-icon.svg",3,"click"],[1,"follow-button",3,"click"],[1,"unfollow-button",3,"click"]],template:function(t,o){1&t&&(c.Mb(0,"ion-toolbar",0),c.Mb(1,"ion-buttons",1),c.kc(2,u,2,1,"ion-button",2),c.kc(3,b,2,1,"ion-button",3),c.Mb(4,"ion-icon",4),c.Ub("click",function(){return o.postPage()}),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.xb(2),c.Zb("ngIf",!o.following&&!o.isUser),c.xb(1),c.Zb("ngIf",o.following&&!o.isUser))},directives:[a.P,a.h,p.i,a.v,a.g],styles:[".comment-button[_ngcontent-%COMP%]{width:130px;--background:#005191;--background-hover:#005191;--color:#fff;font-size:.6em;font-size:800;border-radius:5px}.comment-button[_ngcontent-%COMP%]:focus{--color:orange}.follow-button[_ngcontent-%COMP%]{--color:#fff;--background:#24d8a8;--background-hover:#24d8a8;font-size:.6em;font-size:800;border-radius:5px;width:130px}.unfollow-button[_ngcontent-%COMP%]{font-weight:800;line-height:1em;border:1px solid #faa71b;width:300px;color:#faa71b;font-size:1.5em;padding:2px 0;position:relative;right:20px;border-radius:50px}.comment-button[_ngcontent-%COMP%]:hover, .follow-button[_ngcontent-%COMP%]:hover, .unfollow-button[_ngcontent-%COMP%]:hover{--color:#fff}ion-icon[_ngcontent-%COMP%]{font-size:3em;height:100px;width:100px}@media screen and (max-width:567px){.comment-button[_ngcontent-%COMP%], .follow-button[_ngcontent-%COMP%], .unfollow-button[_ngcontent-%COMP%]{font-size:.5em;width:100px}}"]}),t})()},ENZJ:function(t,o,e){"use strict";e.d(o,"a",function(){return l});var n=e("AytR"),s=e("2Vo4"),i=e("Aso2"),r=e("fXoL"),c=e("tk/3");let l=(()=>{class t{constructor(t,o){this.http=t,this.profile=o,this.BACKEND_URL=n.a.url,this.postsSubject$=new s.a([]),this.commentsSubject$=new s.a([]),this.followingSubject$=new s.a([])}getPosts(){return this.http.get(this.BACKEND_URL+"/api/posts/")}getMyPosts(t){return this.http.post(this.BACKEND_URL+"/api/posts/my-posts",{email:t})}getPostInfo(t){return this.http.post(this.BACKEND_URL+"/api/posts/post-info",{_id:t})}addPost(t,o,e,n,s){return console.log("Adding post to post que..."),console.log("Post: ",n),this.http.post(this.BACKEND_URL+"/api/posts/add-text-post",{creatorName:t,creatorEmail:o,creatorProfilePicture:e,post:n,title:s})}comment(t,o,e,n,s){return this.http.post(this.BACKEND_URL+"/api/posts/comment",{postID:t,userFullName:o,userEmail:e,userProfilePicture:n,comment:s})}editPost(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/edit-post",{postID:t,newPost:o})}editComment(t,o,e){return this.http.post(this.BACKEND_URL+"/api/posts/edit-comment",{postID:o,commentID:t,newComment:e})}upVotePost(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/up-vote-post",{postID:t,userEmail:o})}downVotePost(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/down-vote-post",{postID:t,userEmail:o})}upVoteComment(t,o,e){return this.http.post(this.BACKEND_URL+"/api/posts/up-vote-comment",{postID:t,commentID:o,userEmail:e})}downVoteComment(t,o,e){return this.http.post(this.BACKEND_URL+"/api/posts/down-vote-comment",{postID:t,commentID:o,userEmail:e})}followPost(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/follow",{_id:t,email:o}).subscribe(t=>{let o=[...Object.values(t)];this.followingSubject$.next(o)})}unFollowPost(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/unfollow",{_id:t,email:o}).subscribe(t=>{let o=[...Object.values(t)];this.followingSubject$.next(o)})}getFollowedPost(t){return this.http.post(this.BACKEND_URL+"/api/posts/get-followed-posts",{_id:t})}deleteComment(t,o){return this.http.post(this.BACKEND_URL+"/api/posts/delete-comment",{_id:t,_cid:o})}deletePost(t){return this.http.post(this.BACKEND_URL+"/api/posts/delete-post",{_id:t})}reportComment(t,o,e,n,s,i,r,c,l,a){return this.http.post(this.BACKEND_URL+"/api/posts/report",{commentID:t,commentContents:o,post:e,postID:n,reportedUserName:s,reportedUserEmail:i,commentDate:r,userEmail:c,userFullname:l,reportReason:a})}replyComment(t,o,e,n,s,i,r,c){return this.http.post(this.BACKEND_URL+"/api/posts/reply-comment",{postID:o,commentID:t,reply:e,userFullName:n,userProfilePicture:i,userEmail:s,commentUserEmail:c,commentUserFullName:r})}deleteReply(t,o,e){return this.http.post(this.BACKEND_URL+"/api/posts/delete-reply",{_rid:t,_cid:o,_pid:e})}}return t.\u0275fac=function(o){return new(o||t)(r.Qb(c.b),r.Qb(i.a))},t.\u0275prov=r.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},tymS:function(t,o,e){"use strict";e.r(o),e.d(o,"ThirdPersonProfilePageModule",function(){return b});var n=e("ofXK"),s=e("3Pt+"),i=e("zAgk"),r=e("TEn/"),c=e("tyNb"),l=e("u2AK"),a=e("fXoL");const p=[{path:"",component:l.a}];let u=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(o){return new(o||t)},imports:[[c.j.forChild(p)],c.j]}),t})(),b=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(o){return new(o||t)},imports:[[n.b,s.d,s.l,i.a,r.Q,u]]}),t})()},u2AK:function(t,o,e){"use strict";e.d(o,"a",function(){return w});var n=e("mrSG"),s=e("sWYD"),i=e("Aso2"),r=e("7xvl"),c=e("ENZJ"),l=e("fXoL"),a=e("TEn/"),p=e("3Pt+"),u=e("tyNb"),b=e("ofXK"),h=e("u6v2"),d=e("84P7");function m(t,o){1&t&&(l.Mb(0,"ion-col",11),l.Mb(1,"div"),l.Mb(2,"p",12),l.lc(3,"You currently do not have any posts. Please click the Add Post button to create a Post."),l.Lb(),l.Lb(),l.Lb())}function g(t,o){1&t&&(l.Mb(0,"ion-button",36),l.lc(1,"Post "),l.Lb())}function f(t,o){if(1&t){const t=l.Nb();l.Mb(0,"ion-row",13),l.Mb(1,"ion-col",14),l.Mb(2,"ion-row",15),l.Mb(3,"ion-col",16),l.Ib(4,"img",17),l.Lb(),l.Mb(5,"ion-col",18),l.Mb(6,"h6",19),l.lc(7),l.Lb(),l.Lb(),l.Mb(8,"ion-col",20),l.Mb(9,"h6",21),l.lc(10),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(11,"ion-col",9),l.Mb(12,"ion-row",3),l.Mb(13,"ion-col",22),l.Mb(14,"p",23),l.lc(15),l.Lb(),l.Lb(),l.Lb(),l.Mb(16,"ion-row"),l.Mb(17,"ion-col",24),l.Mb(18,"p",25),l.lc(19),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(20,"ion-col",9),l.Mb(21,"ion-row",26),l.Mb(22,"ion-col",27),l.Mb(23,"ion-item",28),l.Mb(24,"form",29),l.Ub("ngSubmit",function(){l.fc(t);const e=o.$implicit,n=l.Wb();return n.comment(e._id,n.userFullName,n.userEmail,n.userProfilePicture,n.commentForm.value)}),l.Ib(25,"ion-textarea",30),l.kc(26,g,2,0,"ion-button",31),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(27,"ion-col",9),l.Mb(28,"ion-row"),l.Mb(29,"ion-col",32),l.Ib(30,"app-up-down-vote-buttons",33),l.Lb(),l.Mb(31,"ion-col",34),l.Ib(32,"app-follow-comment-buttons",35),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&t){const t=o.$implicit,e=l.Wb();l.xb(4),l.ac("src",t.creatorProfilePicture,l.hc),l.xb(3),l.mc(t.creatorName),l.xb(3),l.mc(t.date),l.xb(5),l.mc(t.title),l.xb(4),l.mc(t.post),l.xb(5),l.Zb("formGroup",e.commentForm),l.xb(2),l.Zb("ngIf",!e.commentForm.get("comment").pristine&&e.commentForm.value.comment.length>=3),l.xb(4),l.Zb("postID",t._id),l.xb(2),l.Zb("isUser",t.isUser)("postID",t._id)}}let w=(()=>{class t{constructor(t,o,e,n,s,i,r){this.navParams=t,this.modal=o,this.profile=e,this.formBuilder=n,this.posts=s,this.toast=i,this.router=r,this.allTheirPosts=[]}ngOnInit(){this.creatorEmail=this.navParams.get("creatorEmail"),this.creatorName=this.navParams.get("creatorName"),this.theirPosts(this.creatorEmail),this.commentForm=this.formBuilder.group({comment:[""]})}cancel(){console.log("cancelling comment..."),this.modal.dismiss()}theirPosts(t){this.profile.getTheirDetails(t).subscribe(t=>{console.log("This is their posts: "),console.log(t),this.profilePicture=t.profilePicture,this.resume=t.resume,this.about=t.about,this.gender=t.gender,this.dob=Object(s.a)(new Date(t.dob),"MMMM do, yyyy"),this.grade=t.grade,this.allTheirPosts=Object.values(t.posts).reverse();for(const o of this.allTheirPosts)o.date=Object(s.a)(new Date(o.date),"MMMM do, yyyy");return this.allTheirPosts})}comment(t,o,e,s,i){return Object(n.a)(this,void 0,void 0,function*(){this.commentForm.reset(),yield Date.now(),console.log("Posting comment"),console.log("Post ID: "+t),yield this.posts.comment(t,this.userFullName,this.userEmail,this.profilePicture,i).subscribe(()=>{this.posts.getPostInfo(t).subscribe(o=>{this.posts.getPostInfo(t).subscribe(t=>{for(let o of t.comments)console.log(o),o.isUser=!1,o.canDeleteComment=!1,o.canReport=!0,o.userEmail===this.userEmail&&(o.isUser=!0,o.canDeleteComment=!0,o.canReport=!1),o.repliesLength=o.replies.length,o.date=Object(r.a)(new Date(o.date),{includeSeconds:!0,addSuffix:!1});this.posts.commentsSubject$.next(t.comments.reverse())})})}),yield this.posts.getPostInfo(t).subscribe(t=>{for(let o of t.comments)o.date=Object(r.a)(new Date(o.date),{includeSeconds:!0,addSuffix:!0});this.posts.commentsSubject$.next(t.comments.reverse())}),this.toast.create({message:"Your comment has been added.",duration:1500}).then(t=>t.present()),yield this.router.navigate(["/home/posts/post-page",t])})}}return t.\u0275fac=function(o){return new(o||t)(l.Hb(a.U),l.Hb(a.T),l.Hb(i.a),l.Hb(p.a),l.Hb(c.a),l.Hb(a.Z),l.Hb(u.f))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-third-person-profile"]],decls:30,vars:9,consts:[["slot","end"],[3,"click"],["slot","start"],[1,"ion-justify-content-center"],["size","6"],["id","profile-picture","alt","",3,"src"],[1,"ion-justify-content-center",2,"margin-top","1%"],["class","no-posts ion-align-items-center","size-xs","11","size-sm","9","size-md","8","size-lg","7",4,"ngIf"],["size","7"],["size","12"],["class","post",4,"ngFor","ngForOf"],["size-xs","11","size-sm","9","size-md","8","size-lg","7",1,"no-posts","ion-align-items-center"],[2,"font-size","1.2em"],[1,"post"],["size","11"],[1,"ion-align-items-center"],["push","0.25","size","1"],[2,"background","#999","border-radius","100px","height","40px","width","40px",3,"src"],["size","4"],[2,"font-size","1em","font-weight","500"],["push-lg","5","size","3",1,"ion-float-right"],[2,"opacity","0.4","font-size","0.8em"],["size","11.3"],[1,"post-title"],["push","0.25","size","11"],[1,"post-content"],[2,"position","relative","right","6px","top","-4px"],["size","11.8"],["lines","none"],[3,"formGroup","ngSubmit"],["autogrow","true","autocapitalize","true","rows","5","spellcheck","true","wrap","soft","type","text","placeholder","Add a Comment","formControlName","comment",1,"comment-input"],["style","float: right;","class","comment-post-button","name","send","type","submit",4,"ngIf"],["size","4.7"],[3,"postID"],["push","0.75","size","6"],[3,"isUser","postID"],["name","send","type","submit",1,"comment-post-button",2,"float","right"]],template:function(t,o){1&t&&(l.Mb(0,"ion-header"),l.Mb(1,"ion-toolbar"),l.Ib(2,"ion-title"),l.Mb(3,"ion-buttons",0),l.Mb(4,"ion-button",1),l.Ub("click",function(){return o.cancel()}),l.Ib(5,"ion-icon",2),l.lc(6," Close "),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content"),l.Mb(8,"ion-grid"),l.Mb(9,"ion-row",3),l.Mb(10,"ion-col",4),l.Ib(11,"img",5),l.Mb(12,"p"),l.lc(13),l.Lb(),l.Mb(14,"p"),l.lc(15),l.Lb(),l.Mb(16,"p"),l.lc(17),l.Lb(),l.Mb(18,"p"),l.lc(19),l.Lb(),l.Mb(20,"p"),l.lc(21),l.Lb(),l.Lb(),l.Lb(),l.Mb(22,"ion-row",6),l.kc(23,m,4,0,"ion-col",7),l.Mb(24,"ion-col",8),l.Mb(25,"ion-row"),l.Mb(26,"ion-col",9),l.Mb(27,"h1"),l.lc(28),l.Lb(),l.Lb(),l.Lb(),l.kc(29,f,33,10,"ion-row",10),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&t&&(l.xb(11),l.ac("src",o.profilePicture,l.hc),l.xb(2),l.mc(o.creatorName),l.xb(2),l.mc(o.gender),l.xb(2),l.mc(o.dob),l.xb(2),l.mc(o.grade),l.xb(2),l.mc(o.about),l.xb(2),l.Zb("ngIf",0===o.allTheirPosts.length),l.xb(5),l.nc("",o.creatorName,"'s Posts"),l.xb(1),l.Zb("ngForOf",o.allTheirPosts))},directives:[a.u,a.P,a.O,a.h,a.g,a.v,a.o,a.t,a.G,a.n,b.i,b.h,a.x,p.o,p.j,p.c,a.N,a.Y,p.i,p.b,h.a,d.a],styles:["ion-title[_ngcontent-%COMP%]{margin:0}#profile-picture[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:50px}.post[_ngcontent-%COMP%]{padding:30px;margin-bottom:80px;border-radius:5px;box-shadow:1px 10px 10px rgba(0,0,0,.05);background:#fff;font-size:1em;line-height:35px}.post[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{background:#999;opacity:.4}.post-title[_ngcontent-%COMP%]{font-weight:800;color:#005191;position:relative;left:5px;margin:0}@media screen and (max-width:567px){.post[_ngcontent-%COMP%]{padding:30px 0}}.no-posts[_ngcontent-%COMP%]{height:70vh}form[_ngcontent-%COMP%]{width:100%}.comment[_ngcontent-%COMP%]{border:1px solid #005191;border-radius:5px;margin-top:20px;padding:10px;--padding-start:20px}.comment-post-button[_ngcontent-%COMP%]{--background:linear-gradient(#0672c4,#005191);height:30px;margin-top:20px;width:80px}.comment-input[_ngcontent-%COMP%]{margin:30px 0 60px}.comment-input[_ngcontent-%COMP%]:hover{margin:50px 0 80px}.comment-input-mobile[_ngcontent-%COMP%]{height:auto;margin:30px 0 60px;box-shadow:none;padding-left:10px;border:1px solid rgba(0,81,145,.4);border-radius:5px}.comment-input-mobile[_ngcontent-%COMP%], .comment-input-mobile[_ngcontent-%COMP%]:focus{background:rgba(247,248,248,.5);transition:1s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275)}.comment-input-mobile[_ngcontent-%COMP%]:focus{height:100px;margin:30px 0 150px;box-shadow:1px 1px 3px #999;border:1px solid #005191;border-radius:5px}ion-item[_ngcontent-%COMP%]{--background:none}.toolbar[_ngcontent-%COMP%] > ion-buttons[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]{height:45px;border-radius:5px;padding:10px;--background:rgba(209,216,224,0.13);--color:#fff;width:140px;font-size:.6em}.toolbar[_ngcontent-%COMP%] > ion-buttons[_ngcontent-%COMP%] > ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{position:relative;left:-10px}.post-toolbar[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:140px;font-size:1em;--color:#005191}.blue-button[_ngcontent-%COMP%]{-webkit-animation:none;animation:none;opacity:unset;height:36px;margin-bottom:4px;position:unset}.add-button[_ngcontent-%COMP%], .blue-button[_ngcontent-%COMP%]{width:100px;margin-top:30px;font-size:.7em}.add-button[_ngcontent-%COMP%]{--color:#fff;--background:linear-gradient(#5ad8b2,#40c59d);--background-hover:linear-gradient(#bffce9,#7efcd4);font-weight:800;display:block}.comment-input[_ngcontent-%COMP%]{margin:10px 0 0;box-shadow:none;border:1px solid rgba(0,81,145,.4);border-radius:5px}.comment-input[_ngcontent-%COMP%], .comment-input[_ngcontent-%COMP%]:hover{background:rgba(247,248,248,.5);height:auto;padding-left:10px;transition:.5s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275)}.comment-input[_ngcontent-%COMP%]:hover{margin:12px 0 0;box-shadow:1px 1px 3px #999;border:1px solid #005191;border-radius:5px}.comment-post-button[_ngcontent-%COMP%]{--background:linear-gradient(#5ad8b2,#40c59d);height:40px;margin-top:40px;opacity:0;width:100%;transform:.5s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275);-webkit-animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) forwards;animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) forwards}ion-fab-button[_ngcontent-%COMP%]{--background:#1baf88;--color-focused:#fff;--color-hover:#fff;--color-activated:#fff;position:relative;bottom:50px;right:10px}@-webkit-keyframes slide-up{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes slide-up{0%{transform:translateY(10px);opacity:0}to{transform:translateY(0);opacity:1}}"]}),t})()},u6v2:function(t,o,e){"use strict";e.d(o,"a",function(){return m});var n=e("mrSG"),s=e("ENZJ"),i=e("Aso2"),r=e("2Vo4"),c=e("DtjX"),l=e("fXoL"),a=e("TEn/"),p=e("ofXK");function u(t,o){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",4),l.Ub("click",function(){return l.fc(t),l.Wb().upVotePost()}),l.Ib(1,"ion-icon",5),l.lc(2),l.Lb()}if(2&t){const t=l.Wb();l.xb(2),l.nc(" ",t.upVoteLength," ")}}function b(t,o){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",4),l.Ub("click",function(){return l.fc(t),l.Wb().upVotePost()}),l.Ib(1,"ion-icon",6),l.lc(2),l.Lb()}if(2&t){const t=l.Wb();l.xb(2),l.nc(" ",t.upVoteLength," ")}}function h(t,o){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",7),l.Ub("click",function(){return l.fc(t),l.Wb().downVotePost()}),l.Ib(1,"ion-icon",8),l.lc(2),l.Lb()}if(2&t){const t=l.Wb();l.xb(2),l.nc(" ",t.downVoteLength," ")}}function d(t,o){if(1&t){const t=l.Nb();l.Mb(0,"ion-button",7),l.Ub("click",function(){return l.fc(t),l.Wb().downVotePost()}),l.Ib(1,"ion-icon",9),l.lc(2),l.Lb()}if(2&t){const t=l.Wb();l.xb(2),l.nc(" ",t.downVoteLength," ")}}let m=(()=>{class t{constructor(t,o,e,n){this.posts=t,this.profile=o,this.toast=e,this.postsEmitterService=n,this.upVotes$=new r.a(null),this.downVotes$=new r.a(null),this.upVoters=[],this.downVoters=[],this.upVoted=!1,this.downVoted=!1}ngOnInit(){return Object(n.a)(this,void 0,void 0,function*(){yield this.posts.getPostInfo(this.postID).subscribe(t=>{this.upVotes=t.upvotes,this.downVotes=t.downvotes,this.upVoters=t.upvoters,this.downVoters=t.downvoters,this.upVotes$.next(this.upVotes),this.downVotes$.next(this.downVotes),this.upVoteLength=this.upVotes$.getValue(),this.downVoteLength=this.downVotes$.getValue(),this.profile.getUserDetails().subscribe(t=>{let o=t.email,e=!1,n=!1;this.upVoters.find(function(t){if(t===o)return e=!0;console.log("Upvoter: "+t)}),this.downVoters.find(function(t){if(t===o)return n=!0}),this.userEmail=o,this.upVoted=e,this.downVoted=n})})})}upVotePost(){return Object(n.a)(this,void 0,void 0,function*(){yield this.posts.upVotePost(this.postID,this.userEmail).subscribe(t=>{const o=t.upvotes,e=t.downvotes;if(console.log(t),this.upVotes$.next(o),this.downVotes$.next(e),this.upVoted=!0,this.upVoteLength=this.upVotes$.getValue(),this.downVoteLength=this.downVotes$.getValue(),!0===this.upVoted)return this.downVoted=!1}),this.postsEmitterService.postPageRefresh(),this.upVotePostToast()})}upVotePostToast(){return Object(n.a)(this,void 0,void 0,function*(){(yield this.toast.create({cssClass:"upvoted-toast",message:"You have UPVOTED this post.",duration:2e3})).present()})}downVotePost(){return Object(n.a)(this,void 0,void 0,function*(){yield this.posts.downVotePost(this.postID,this.userEmail).subscribe(t=>{const o=t.upvotes,e=t.downvotes;if(console.log(t),this.upVotes$.next(o),this.downVotes$.next(e),this.downVoted=!0,this.upVoteLength=this.upVotes$.getValue(),this.downVoteLength=this.downVotes$.getValue(),!0===this.downVoted)return this.upVoted=!1}),this.postsEmitterService.postPageRefresh(),this.downVoteToast()})}downVoteToast(){return Object(n.a)(this,void 0,void 0,function*(){(yield this.toast.create({cssClass:"downvoted-toast",message:"You have DOWNVOTED this post.",duration:2e3})).present()})}}return t.\u0275fac=function(o){return new(o||t)(l.Hb(s.a),l.Hb(i.a),l.Hb(a.Z),l.Hb(c.a))},t.\u0275cmp=l.Bb({type:t,selectors:[["app-up-down-vote-buttons"]],inputs:{postID:"postID"},decls:6,vars:4,consts:[[2,"--background","none"],["slot","start"],["class","upvote",3,"click",4,"ngIf"],["class","downvote",3,"click",4,"ngIf"],[1,"upvote",3,"click"],["size","large","src","../assets/icon/caret-up-outline.svg"],["size","large","src","../assets/icon/caret-up-outline-active.svg"],[1,"downvote",3,"click"],["size","large","src","../assets/icon/caret-down-outline.svg"],["size","large","src","../assets/icon/caret-down-outline-active.svg"]],template:function(t,o){1&t&&(l.Mb(0,"ion-toolbar",0),l.Mb(1,"ion-buttons",1),l.kc(2,u,3,1,"ion-button",2),l.kc(3,b,3,1,"ion-button",2),l.kc(4,h,3,1,"ion-button",3),l.kc(5,d,3,1,"ion-button",3),l.Lb(),l.Lb()),2&t&&(l.xb(2),l.Zb("ngIf",!o.upVoted),l.xb(1),l.Zb("ngIf",o.upVoted),l.xb(1),l.Zb("ngIf",!o.downVoted),l.xb(1),l.Zb("ngIf",o.downVoted))},directives:[a.P,a.h,p.i,a.g,a.v],styles:["ion-buttons[_ngcontent-%COMP%]{position:relative;left:10px}.upvote[_ngcontent-%COMP%]{border-radius:5px;position:relative;--color:#005191}.upvote[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#005191;font-size:40px}.downvote[_ngcontent-%COMP%]{border-radius:5px;padding-left:0;--color:#005191}.downvote[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#005191;--font-size:40px}.upvoted-toast[_ngcontent-%COMP%]{--background:#005191}.downvoted-toast[_ngcontent-%COMP%]{--background:#ffb351}.followed-toast[_ngcontent-%COMP%]{--background:#24d8a8}.unfollowed-toast[_ngcontent-%COMP%]{--background:#ffb351}"]}),t})()}}]);