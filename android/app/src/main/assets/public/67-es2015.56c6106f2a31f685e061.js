(window.webpackJsonp=window.webpackJsonp||[]).push([[67,68],{Aso2:function(e,t,s){"use strict";s.d(t,"a",function(){return m});var o=s("mrSG"),a=s("NuaS"),i=s("lGQG"),r=s("2Vo4"),n=s("JIr8"),h=s("AytR"),l=s("fXoL"),c=s("tk/3"),u=s("e8h1"),d=s("TEn/"),p=s("tyNb");let m=(()=>{class e{constructor(e,t,s,o,a,i,n){this.http=e,this.storage=t,this.alertController=s,this.helper=o,this.auth=a,this.router=i,this.toastController=n,this.BACKEND_URL=h.a.url,this.activeEmail="",this.fullName=new r.a(""),this.about=new r.a(""),this.city=new r.a(""),this.state=new r.a(""),this.zip=new r.a(""),this.gender=new r.a(""),this.dob=new r.a(""),this.school=new r.a(""),this.grade=new r.a(""),this.profilePicture=new r.a(""),this.resume=new r.a(""),this.email=new r.a(""),this.activeEmail=this.auth.user.email}getAllUsers(){return this.http.get(this.BACKEND_URL+"/api/home/user")}getUserDetails(){return this.http.post(this.BACKEND_URL+"/api/home/user",{email:this.activeEmail})}getTheirDetails(e){return this.http.post(this.BACKEND_URL+"/api/home/user/their-details",{email:e})}changeEmail(e,t,s){return this.http.post(this.BACKEND_URL+"/api/home/user/change-email",{oldEmail:this.activeEmail,email:t,password:s}).pipe(Object(n.a)(e=>{throw this.presentFailToast(this.activeEmail),new Error(e)})).subscribe(e=>{if(!0!==e)return this.presentFailToast(this.activeEmail),console.log("Passwords dont match");this.email.next(t),this.activeEmail=t,this.router.navigate(["/home/profile"]),this.presentSuccessToast()})}presentSuccessToast(){this.toastController.create({message:"Your Email address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())}presentFailToast(e){this.toastController.create({message:"Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of "+e,duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())}changePassword(e,t,s,a){return Object(o.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-password",{oldPassword:t,email:e,newPassword:s,reTypeNewPassword:a}).subscribe(e=>{!0===e?(console.log("TRUE"),this.router.navigate([""]),this.toastController.create({message:"Password updated. Please login with your new password.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())):console.log("Passwords dont match!")})})}changeAbout(e,t,s){return Object(o.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-about",{email:e,newAbout:t,passsword:s}).subscribe()})}changeSchool(e,t,s,a){return Object(o.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newSchool:t,newGrade:s,password:a}).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.school.next(t),this.grade.next(s),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your school information has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())})})}changeProfilePicture(e,t){return Object(o.a)(this,void 0,void 0,function*(){return this.http.post(this.BACKEND_URL+"/api/photo/change-profile-picture",{imageForm:e,oldPhotoKey:t}).subscribe()})}changeResume(e,t,s){return Object(o.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newResume:t,password:s}).subscribe(e=>{if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),this.resume.next(t),this.router.navigate(["/home/user/change-school/:school/:grade/confirm"])})})}delete(){console.log("Deleted User")}}return e.\u0275fac=function(t){return new(t||e)(l.Qb(c.b),l.Qb(u.b),l.Qb(d.a),l.Qb(a.b),l.Qb(i.a),l.Qb(p.f),l.Qb(d.Z))},e.\u0275prov=l.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);