(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Aso2:function(e,s,t){"use strict";t.d(s,"a",(function(){return m}));var o=t("mrSG"),a=(t("EThc"),t("ZZ/e")),r=t("lGQG"),i=t("2Vo4"),n=t("JIr8"),h=t("vkgz"),d=t("AytR"),l=t("8Y7J"),c=t("IheW"),u=t("xgBC"),p=t("gFH1"),b=t("iInd");let m=(()=>{class e{constructor(e,s,t,o,a,r,n){this.http=e,this.storage=s,this.alertController=t,this.helper=o,this.auth=a,this.router=r,this.toastController=n,this.BACKEND_URL=d.a.url,this.activeEmail="",this.user={},this.fullName=new i.a(""),this.addressOne=new i.a(""),this.addressTwo=new i.a(""),this.phone=new i.a(""),this.city=new i.a(""),this.state=new i.a(""),this.zip=new i.a(""),this.gender=new i.a(""),this.dob=new i.a(""),this.school=new i.a(""),this.grade=new i.a(""),this.profilePicture=new i.a(""),this.resume=new i.a(""),this.email=new i.a(""),this.activeEmail=this.auth.user.email}getUserDetails(){return this.http.post(`${this.BACKEND_URL}/api/home/user`,{email:this.activeEmail})}changeEmail(e,s,t){return this.http.post(`${this.BACKEND_URL}/api/home/user/change-email`,{oldEmail:this.activeEmail,email:s,password:t}).pipe(Object(n.a)(e=>{throw this.presentFailToast(this.activeEmail),new Error(e)})).subscribe(e=>{if(!0!==e)return this.presentFailToast(this.activeEmail),console.log("Passwords dont match");this.email.next(s),this.activeEmail=s,this.router.navigate(["/home/profile"]),this.presentSuccessToast()})}presentSuccessToast(){this.toastController.create({message:"Your Email address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())}presentFailToast(e){this.toastController.create({message:`Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of ${e}`,duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())}changePassword(e,s,t,a){return o.b(this,void 0,void 0,(function*(){return yield this.http.post(`${this.BACKEND_URL}/api/home/user/change-password`,{oldPassword:s,email:e,newPassword:t,reTypeNewPassword:a}).subscribe(e=>{!0===e?(console.log("TRUE"),this.router.navigate([""]),this.toastController.create({message:"Password updated. Please login with your new password.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())):console.log("Passwords dont match!")})}))}changePhone(e,s,t){return o.b(this,void 0,void 0,(function*(){return yield this.http.post(`${this.BACKEND_URL}/api/home/user/change-phone`,{newNumber:s,password:t,email:e}).subscribe(e=>{!0===e?(console.log("Changing phone number..."),this.phone.next(s),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your phone number has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())):(console.log("Passwords dont match!"),this.toastController.create({message:"Password was incorrect",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()))})}))}changeAddress(e,s,t,a,r,i,d){return o.b(this,void 0,void 0,(function*(){return yield this.http.post(`${this.BACKEND_URL}/api/home/user/change-address`,{email:e,addressOne:s,addressTwo:t,city:a,state:r,zip:i,password:d}).pipe(Object(h.a)(e=>{e||console.log("There was no response. There might be a bad password")}),Object(n.a)(e=>{throw new Error(e)})).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.addressOne.next(s),this.addressTwo.next(t),this.city.next(a),this.state.next(r),this.zip.next(i),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())})}))}changeSchool(e,s,t,a){return o.b(this,void 0,void 0,(function*(){return yield this.http.post(`${this.BACKEND_URL}/api/home/user/change-school`,{email:e,newSchool:s,newGrade:t,password:a}).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.school.next(s),this.grade.next(t),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your school information has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())})}))}changeProfilePicture(e,s){return o.b(this,void 0,void 0,(function*(){return this.http.post(`${this.BACKEND_URL}/api/photo/change-profile-picture`,{imageForm:e,oldPhotoKey:s}).subscribe()}))}changeResume(e,s,t){return o.b(this,void 0,void 0,(function*(){return yield this.http.post(`${this.BACKEND_URL}/api/home/user/change-school`,{email:e,newResume:s,password:t}).subscribe(e=>{if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),this.resume.next(s),this.router.navigate(["/home/user/change-school/:school/:grade/confirm"])})}))}delete(){console.log("Deleted User")}}return e.ngInjectableDef=l.Yb({factory:function(){return new e(l.Zb(c.c),l.Zb(u.b),l.Zb(a.b),l.Zb(p.a),l.Zb(r.a),l.Zb(b.m),l.Zb(a.Qb))},token:e,providedIn:"root"}),e})()},NziY:function(e,s,t){"use strict";t.r(s),t.d(s,"EditPostPageModuleNgFactory",(function(){return p}));var o=t("8Y7J"),a=t("9CtM"),r=t("pMnS"),i=t("7E5L"),n=t("SVse"),h=t("s7LF"),d=t("ZZ/e"),l=t("iInd"),c=t("OHV1"),u=t("VPH/"),p=o.yb(a.a,[],(function(e){return o.Kb([o.Lb(512,o.m,o.jb,[[8,[r.a,i.a]],[3,o.m],o.D]),o.Lb(4608,n.l,n.k,[o.z,[2,n.s]]),o.Lb(4608,h.r,h.r,[]),o.Lb(4608,h.b,h.b,[]),o.Lb(4608,d.c,d.c,[o.F,o.g]),o.Lb(4608,d.Ib,d.Ib,[d.c,o.m,o.w]),o.Lb(4608,d.Mb,d.Mb,[d.c,o.m,o.w]),o.Lb(1073742336,n.c,n.c,[]),o.Lb(1073742336,h.q,h.q,[]),o.Lb(1073742336,h.e,h.e,[]),o.Lb(1073742336,h.n,h.n,[]),o.Lb(1073742336,d.Fb,d.Fb,[]),o.Lb(1073742336,l.q,l.q,[[2,l.v],[2,l.m]]),o.Lb(1073742336,c.a,c.a,[]),o.Lb(1073742336,a.a,a.a,[]),o.Lb(1024,l.k,(function(){return[[{path:"",component:u.a}]]}),[])])}))}}]);