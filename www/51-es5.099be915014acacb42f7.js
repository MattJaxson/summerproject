!function(){function e(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw i}}}}function n(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{JGKh:function(n,o,a){"use strict";a.r(o),a.d(o,"StudentChatPageModule",function(){return L});var i=a("ofXK"),s=a("3Pt+"),c=a("TEn/"),u=a("tyNb"),l=a("mrSG"),b=a("gLVQ"),f=a("Y19J"),p=a("Aso2"),g=a("7xvl"),d=a("fXoL");function m(e,n){1&e&&(d.Mb(0,"div",9),d.Mb(1,"p"),d.nc(2,"You have "),d.Mb(3,"b"),d.nc(4,"no messages"),d.Lb(),d.nc(5," in your inbox. Please press the "),d.Ib(6,"ion-icon",10),d.nc(7," button to create a new message. "),d.Lb(),d.Lb())}function h(e,n){if(1&e){var t=d.Nb();d.Mb(0,"ion-item-sliding",4),d.Ub("click",function(){d.gc(t);var e=n.$implicit;return d.Wb().chatPage(e.chatId)}),d.Mb(1,"ion-item",11),d.Mb(2,"ion-avatar",1),d.Ib(3,"img",12),d.Lb(),d.Mb(4,"ion-label"),d.Mb(5,"h2"),d.nc(6),d.Mb(7,"span",13),d.nc(8),d.Lb(),d.Lb(),d.Mb(9,"p"),d.nc(10),d.Lb(),d.Lb(),d.Lb(),d.Ib(11,"ion-item-options",14),d.Lb()}if(2&e){var r=n.$implicit;d.xb(3),d.ac("src",r.isUser?r.respondingUserPhoto:r.requestingUserPhoto,d.ic),d.xb(3),d.pc("",r.isUser?r.respondingUserFullname:r.requestingUserFullname," "),d.xb(2),d.pc("\xb7 ",r.lastMessageTime,""),d.xb(2),d.oc(r.lastMessageText)}}var v,y,M,w=[{path:"",component:(v=function(){function n(e,r,o,a){t(this,n),this.router=e,this.modal=r,this.studentChat=o,this.profile=a}var o,a,i;return o=n,(a=[{key:"ngOnInit",value:function(){var n=this;this.profile.getUserDetails().subscribe(function(t){n.fullName=t.fullName,n.profilePicture=t.profilePicture,n.email=t.email,n.studentChat.conversations$.subscribe(function(t){n.conversations=Object.values(t).reverse();var r,o=e(n.conversations);try{for(o.s();!(r=o.n()).done;){var a,i=r.value,s=e(i.messages);try{for(s.s();!(a=s.n()).done;){var c=a.value;c.date=Object(g.a)(new Date(c.date))}}catch(u){s.e(u)}finally{s.f()}i.requestingUserEmail===n.email&&(i.isUser=!0),i.lastMessage=i.messages.slice(-1)[0],i.lastMessageText=i.lastMessage.text,i.lastMessageTime=i.lastMessage.date}}catch(u){o.e(u)}finally{o.f()}})})}},{key:"chatPage",value:function(e){this.router.navigate(["home/posts/student-chat/chat-page",e,this.fullName,this.profilePicture,this.email])}},{key:"newMessage",value:function(){return Object(l.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.modal.create({component:b.a,componentProps:{}});case 2:return n=e.sent,e.next=5,n.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"delete",value:function(e){}}])&&r(o.prototype,a),i&&r(o,i),n}(),v.\u0275fac=function(e){return new(e||v)(d.Hb(u.g),d.Hb(c.W),d.Hb(f.a),d.Hb(p.a))},v.\u0275cmp=d.Bb({type:v,selectors:[["app-student-chat"]],decls:15,vars:2,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"toolbar-title"],["slot","end"],[3,"click"],["size","large","name","create",1,"new-message"],[1,"searchbar-wrapper","ion-hide-lg-up"],["id","no-messages","class","ion-text-center","style","margin-top: 75px; padding: 15px;",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],["id","no-messages",1,"ion-text-center",2,"margin-top","75px","padding","15px"],["size","small","name","create",1,"new-message"],[1,"unread"],[3,"src"],[1,"date-sent"],["side","end"]],template:function(e,n){1&e&&(d.Mb(0,"ion-header",0),d.Mb(1,"ion-toolbar"),d.Mb(2,"ion-buttons",1),d.Ib(3,"ion-back-button"),d.Mb(4,"p",2),d.nc(5,"Student Chat"),d.Lb(),d.Lb(),d.Mb(6,"ion-buttons",3),d.Mb(7,"ion-button",4),d.Ub("click",function(){return n.newMessage()}),d.Ib(8,"ion-icon",5),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Mb(9,"ion-content"),d.Mb(10,"ion-toolbar",6),d.Ib(11,"ion-searchbar"),d.Lb(),d.Mb(12,"ion-list",0),d.mc(13,m,8,0,"div",7),d.mc(14,h,12,4,"ion-item-sliding",8),d.Lb(),d.Lb()),2&e&&(d.xb(13),d.Zb("ngIf",0==n.conversations),d.xb(1),d.Zb("ngForOf",n.conversations))},directives:[c.u,c.S,c.h,c.e,c.f,c.g,c.v,c.o,c.J,c.db,c.C,i.j,i.i,c.A,c.x,c.d,c.B,c.z],styles:[".new-message[_ngcontent-%COMP%]{color:#faa71b}ion-label[_ngcontent-%COMP%]{font-weight:800;display:block}.searchbar-wrapper[_ngcontent-%COMP%]{margin:20px 0}.unread[_ngcontent-%COMP%]{--background:#cbd7e6}.date-sent[_ngcontent-%COMP%]{font-size:.8em;opacity:.5}"]}),v)},{path:"chat-page/:chatId/:fullName/:profilePicture/:email",loadChildren:function(){return Promise.all([a.e(0),a.e(50)]).then(a.bind(null,"j1T8")).then(function(e){return e.ChatPagePageModule})}}],x=((y=function e(){t(this,e)}).\u0275mod=d.Fb({type:y}),y.\u0275inj=d.Eb({factory:function(e){return new(e||y)},imports:[[u.k.forChild(w)],u.k]}),y),P=a("AhZb"),L=((M=function e(){t(this,e)}).\u0275mod=d.Fb({type:M}),M.\u0275inj=d.Eb({factory:function(e){return new(e||M)},imports:[[i.b,s.d,c.T,x,P.NewMessageStudentPageModule]]}),M)}}])}();