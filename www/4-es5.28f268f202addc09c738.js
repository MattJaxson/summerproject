(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"7xvl":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var o=s("FVam"),a=s("jIYg");function r(e,t){return Object(a.a)(1,arguments),Object(o.a)(e,Date.now(),t)}},Aso2:function(e,t,s){"use strict";s.d(t,"a",(function(){return g}));var o=s("mrSG"),a=(s("EThc"),s("ZZ/e")),r=s("lGQG"),n=s("2Vo4"),i=s("JIr8"),c=s("vkgz"),h=s("AytR"),u=s("8Y7J"),l=s("IheW"),d=s("xgBC"),m=s("gFH1"),p=s("iInd");let g=(()=>{class e{constructor(e,t,s,o,a,r,i){this.http=e,this.storage=t,this.alertController=s,this.helper=o,this.auth=a,this.router=r,this.toastController=i,this.BACKEND_URL=h.a.url,this.activeEmail="",this.user={},this.fullName=new n.a(""),this.addressOne=new n.a(""),this.addressTwo=new n.a(""),this.phone=new n.a(""),this.city=new n.a(""),this.state=new n.a(""),this.zip=new n.a(""),this.gender=new n.a(""),this.dob=new n.a(""),this.school=new n.a(""),this.grade=new n.a(""),this.profilePicture=new n.a(""),this.resume=new n.a(""),this.email=new n.a(""),this.activeEmail=this.auth.user.email}getUserDetails(){return this.http.post("".concat(this.BACKEND_URL,"/api/home/user"),{email:this.activeEmail})}changeEmail(e,t,s){return this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-email"),{oldEmail:this.activeEmail,email:t,password:s}).pipe(Object(i.a)(e=>{throw this.presentFailToast(this.activeEmail),new Error(e)})).subscribe(e=>{if(!0!==e)return this.presentFailToast(this.activeEmail),console.log("Passwords dont match");this.email.next(t),this.activeEmail=t,this.router.navigate(["/home/profile"]),this.presentSuccessToast()})}presentSuccessToast(){this.toastController.create({message:"You have changed your email address to ".concat(this.activeEmail,"."),duration:3e3,cssClass:"success-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())}presentFailToast(e){this.toastController.create({message:"Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of ".concat(e),duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())}changePassword(e,t,s,a){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-password"),{oldPassword:t,email:e,newPassword:s,reTypeNewPassword:a}).subscribe(e=>{!0===e?(console.log("TRUE"),this.router.navigate([""]),this.toastController.create({message:"Please login with your new Password",duration:3e3}).then(e=>e.present())):console.log("Passwords dont match!")})}))}changePhone(e,t,s){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-phone"),{newNumber:t,password:s,email:e}).subscribe(e=>{!0===e?(console.log("Changing phone number..."),this.phone.next(t),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Phone Number changed to ".concat(t),duration:3e3,cssClass:"success-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())):(console.log("Passwords dont match!"),this.toastController.create({message:"Password was incorrect",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()))})}))}changeAddress(e,t,s,a,r,n,h){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-address"),{email:e,addressOne:t,addressTwo:s,city:a,state:r,zip:n,password:h}).pipe(Object(c.a)(e=>{e||console.log("There was no response. There might be a bad password")}),Object(i.a)(e=>{throw new Error(e)})).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.addressOne.next(t),this.addressTwo.next(s),this.city.next(a),this.state.next(r),this.zip.next(n),this.router.navigate(["/home/profile"]),this.toastController.create({message:"You have changed your address to ".concat(t," ").concat(s," ,").concat(a,", ").concat(r,", ").concat(n,"."),duration:3e3,cssClass:"success-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())})}))}changeSchool(e,t,s,a){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-school"),{email:e,newSchool:t,newGrade:s,password:a}).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.school.next(t),this.grade.next(s),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your school and grade has been updated to ".concat(s,", ").concat(t),duration:5e3,cssClass:"success-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())})}))}changeProfilePicture(e,t,s){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-school"),{email:e,newPicture:t,password:s}).subscribe(e=>{if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),this.profilePicture.next(t),this.router.navigate(["/home/user/change-school/:school/:grade/confirm"])})}))}changeResume(e,t,s){return o.b(this,void 0,void 0,(function*(){return yield this.http.post("".concat(this.BACKEND_URL,"/api/home/user/change-school"),{email:e,newResume:t,password:s}).subscribe(e=>{if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),this.resume.next(t),this.router.navigate(["/home/user/change-school/:school/:grade/confirm"])})}))}delete(){console.log("Deleted User")}}return e.ngInjectableDef=u.Wb({factory:function(){return new e(u.Xb(l.c),u.Xb(d.b),u.Xb(a.b),u.Xb(m.a),u.Xb(r.a),u.Xb(p.m),u.Xb(a.Qb))},token:e,providedIn:"root"}),e})()},FVam:function(e,t,s){"use strict";var o=s("/Tr7"),a=s("jIYg");function r(e,t){Object(a.a)(2,arguments);var s=Object(o.a)(e),r=Object(o.a)(t),n=s.getTime()-r.getTime();return n<0?-1:n>0?1:n}function n(e,t){Object(a.a)(2,arguments);var s=Object(o.a)(e),r=Object(o.a)(t),n=s.getFullYear()-r.getFullYear(),i=s.getMonth()-r.getMonth();return 12*n+i}function i(e,t){Object(a.a)(2,arguments);var s=Object(o.a)(e),i=Object(o.a)(t),c=r(s,i),h=Math.abs(n(s,i));s.setMonth(s.getMonth()-c*h);var u=r(s,i)===-c,l=c*(h-u);return 0===l?0:l}function c(e,t){Object(a.a)(2,arguments);var s=Object(o.a)(e),r=Object(o.a)(t);return s.getTime()-r.getTime()}function h(e,t){Object(a.a)(2,arguments);var s=c(e,t)/1e3;return s>0?Math.floor(s):Math.ceil(s)}var u=s("iSMj");function l(e){return function(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var s in t=t||{})t.hasOwnProperty(s)&&(e[s]=t[s]);return e}({},e)}var d=s("JCDJ");function m(e,t,s){Object(a.a)(2,arguments);var n=s||{},c=n.locale||u.a;if(!c.formatDistance)throw new RangeError("locale must contain formatDistance property");var m=r(e,t);if(isNaN(m))throw new RangeError("Invalid time value");var p,g,f=l(n);f.addSuffix=Boolean(n.addSuffix),f.comparison=m,m>0?(p=Object(o.a)(t),g=Object(o.a)(e)):(p=Object(o.a)(e),g=Object(o.a)(t));var w,b=h(g,p),v=(Object(d.a)(g)-Object(d.a)(p))/1e3,C=Math.round((b-v)/60);if(C<2)return n.includeSeconds?b<5?c.formatDistance("lessThanXSeconds",5,f):b<10?c.formatDistance("lessThanXSeconds",10,f):b<20?c.formatDistance("lessThanXSeconds",20,f):b<40?c.formatDistance("halfAMinute",null,f):c.formatDistance(b<60?"lessThanXMinutes":"xMinutes",1,f):0===C?c.formatDistance("lessThanXMinutes",1,f):c.formatDistance("xMinutes",C,f);if(C<45)return c.formatDistance("xMinutes",C,f);if(C<90)return c.formatDistance("aboutXHours",1,f);if(C<1440){var D=Math.round(C/60);return c.formatDistance("aboutXHours",D,f)}if(C<2520)return c.formatDistance("xDays",1,f);if(C<43200){var y=Math.round(C/1440);return c.formatDistance("xDays",y,f)}if(C<86400)return w=Math.round(C/43200),c.formatDistance("aboutXMonths",w,f);if((w=i(g,p))<12){var j=Math.round(C/43200);return c.formatDistance("xMonths",j,f)}var O=w%12,E=Math.floor(w/12);return O<3?c.formatDistance("aboutXYears",E,f):O<9?c.formatDistance("overXYears",E,f):c.formatDistance("almostXYears",E+1,f)}s.d(t,"a",(function(){return m}))}}]);