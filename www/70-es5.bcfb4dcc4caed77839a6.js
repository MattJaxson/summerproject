!function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[70,68,69],{Aso2:function(t,r,n){"use strict";n.d(r,"a",function(){return f});var o=n("mrSG"),s=n("NuaS"),a=n("lGQG"),i=n("2Vo4"),u=n("JIr8"),c=n("AytR"),h=n("fXoL"),l=n("tk/3"),p=n("e8h1"),d=n("TEn/"),m=n("tyNb"),f=function(){var t=function(){function t(e,r,n,o,s,a,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.http=e,this.storage=r,this.alertController=n,this.helper=o,this.auth=s,this.router=a,this.toastController=u,this.BACKEND_URL=c.a.url,this.activeEmail="",this.fullName=new i.a(""),this.about=new i.a(""),this.city=new i.a(""),this.state=new i.a(""),this.zip=new i.a(""),this.gender=new i.a(""),this.dob=new i.a(""),this.school=new i.a(""),this.grade=new i.a(""),this.profilePicture=new i.a(""),this.resume=new i.a(""),this.email=new i.a(""),this.phone=new i.a(""),this.activeEmail=this.auth.user.email}var r,n,s;return r=t,(n=[{key:"getAllUsers",value:function(){return this.http.get(this.BACKEND_URL+"/api/home/user")}},{key:"getUserDetails",value:function(){return this.http.post(this.BACKEND_URL+"/api/home/user",{email:this.activeEmail})}},{key:"getTheirDetails",value:function(e){return this.http.post(this.BACKEND_URL+"/api/home/user/their-details",{email:e})}},{key:"changeEmail",value:function(e,t){var r=this;return this.http.post(this.BACKEND_URL+"/api/home/user/change-email",{oldEmail:this.activeEmail,email:e,password:t}).pipe(Object(u.a)(function(e){throw r.presentFailToast(r.activeEmail),new Error(e)})).subscribe(function(t){if(!0!==t)return r.presentFailToast(r.activeEmail),console.log("Passwords dont match");r.email.next(e),r.activeEmail=e,r.router.navigate(["/home/profile"]),r.presentSuccessToast()})}},{key:"changePhone",value:function(e,t){var r=this;return this.http.post(this.BACKEND_URL+"/api/home/user/change-phone",{email:this.email,newPhone:e,password:t}).pipe(Object(u.a)(function(e){throw r.presentFailToast(r.activeEmail),new Error(e)})).subscribe(function(t){if(!0!==t)return r.presentFailToast(r.activeEmail),console.log("Passwords dont match");r.phone.next(e),r.phone=e,r.router.navigate(["/home/profile"]),r.presentSuccessToast()})}},{key:"presentSuccessToast",value:function(){this.toastController.create({message:"Your Email address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})}},{key:"presentFailToast",value:function(e){this.toastController.create({message:"Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of "+e,duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(function(e){return e.present()})}},{key:"changePassword",value:function(e,t,r,n){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var s=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-password",{oldPassword:t,email:e,newPassword:r,reTypeNewPassword:n}).subscribe(function(e){!0===e?(console.log("TRUE"),s.router.navigate([""]),s.toastController.create({message:"Password updated. Please login with your new password.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})):console.log("Passwords dont match!")});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},o,this)}))}},{key:"changeAbout",value:function(e,t,r){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-about",{email:e,newAbout:t,passsword:r}).subscribe();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"changeSchool",value:function(e,t,r,n){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var s=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newSchool:t,newGrade:r,password:n}).subscribe(function(e){if(!0!==e)return s.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(function(e){return e.present()}),console.log("Passwords dont match");s.school.next(t),s.grade.next(r),s.router.navigate(["/home/profile"]),s.toastController.create({message:"Your school information has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}},o,this)}))}},{key:"changeProfilePicture",value:function(e,t){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.http.post(this.BACKEND_URL+"/api/photo/change-profile-picture",{imageForm:e,oldPhotoKey:t}).subscribe());case 1:case"end":return r.stop()}},r,this)}))}},{key:"changeResume",value:function(e,t,r){return Object(o.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newResume:t,password:r}).subscribe(function(e){if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),o.resume.next(t),o.router.navigate(["/home/user/change-school/:school/:grade/confirm"])});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"delete",value:function(){console.log("Deleted User")}}])&&e(r.prototype,n),s&&e(r,s),t}();return t.\u0275fac=function(e){return new(e||t)(h.Qb(l.b),h.Qb(p.b),h.Qb(d.a),h.Qb(s.b),h.Qb(a.a),h.Qb(m.g),h.Qb(d.eb))},t.\u0275prov=h.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();