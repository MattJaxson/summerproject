(window.webpackJsonp=window.webpackJsonp||[]).push([[24,68,69,70],{"723k":function(e,t,o){"use strict";o.r(t),o.d(t,"ProfilePageModule",function(){return f});var i=o("TEn/"),n=o("tyNb"),s=o("ofXK"),r=o("3Pt+"),a=o("mrSG"),l=o("lGQG"),h=o("Aso2"),c=o("pLZG"),u=o("fXoL"),b=o("e8h1");let p=(()=>{class e{constructor(e,t,o,i,n,s,r){this.auth=e,this.profile=t,this.storage=o,this.router=i,this.toast=n,this.alert=s,this.loading=r,this.userObject={fullName:"",about:"",city:"",state:"",zip:"",gender:"",dob:"",school:"",grade:"",profilePicture:"",resume:"",email:"",phone:""}}ngOnDestroy(){this.detailsSub.unsubscribe(),this.profile.fullName.unsubscribe(),this.profile.about.unsubscribe(),this.profile.city.unsubscribe(),this.profile.state.unsubscribe(),this.profile.zip.unsubscribe(),this.profile.gender.unsubscribe(),this.profile.school.unsubscribe(),this.profile.grade.unsubscribe(),this.profile.profilePicture.unsubscribe(),this.profile.email.unsubscribe(),this.profile.phone.unsubscribe(),this.profile.resume.unsubscribe()}ngOnInit(){this.trackRoute(),this.detailsSub=this.profile.getUserDetails().subscribe(e=>{console.log(e);const t=e.about,o=e.city,i=e.state,n=e.zip,s=e.gender,r=e.dob,a=e.school,l=e.grade,h=e.profilePicture,c=e.resume,u=e.email,b=e.phone;this.profile.fullName.next(e.fullName),this.profile.about.next(t),this.profile.city.next(o),this.profile.state.next(i),this.profile.zip.next(n),this.profile.gender.next(s),this.profile.dob.next(r),this.profile.school.next(a),this.profile.grade.next(l),this.profile.profilePicture.next(h),this.profile.resume.next(c),this.profile.email.next(u),this.profile.phone.next(b),this.profile.fullName.subscribe(e=>{this.userObject.fullName=e}),this.profile.about.subscribe(e=>{this.userObject.about=e}),this.profile.city.subscribe(e=>{this.userObject.city=e}),this.profile.state.subscribe(e=>{this.userObject.state=e}),this.profile.zip.subscribe(e=>{this.userObject.zip=e}),this.profile.gender.subscribe(e=>{this.userObject.gender=e}),this.profile.dob.subscribe(e=>{this.userObject.dob=e}),this.profile.school.subscribe(e=>{this.userObject.school=e}),this.profile.grade.subscribe(e=>{this.userObject.grade=e}),this.profile.profilePicture.subscribe(e=>{this.userObject.profilePicture=e}),this.profile.resume.subscribe(e=>{this.userObject.resume=e}),this.profile.email.subscribe(e=>{this.userObject.email=e}),this.profile.phone.subscribe(e=>{this.userObject.phone=e})})}trackRoute(){this.routerSub=this.router.events.pipe(Object(c.a)(e=>e instanceof n.c)).subscribe(e=>{console.log(e.url);let t=e.url;if(t.includes("/home/profile/change")||t.includes("/home/profile/view-resume")||t.includes("/home/profile/update-resume")){console.log("Hide Tab Bar!");let e=document.getElementById("tabBar");e.style.height="0px",e.style.transition="1s"}else{let e=document.getElementById("tabBar");console.log(e),e.style.height="50px",e.style.transition="1s"}})}clearToken(){this.storage.remove("access_token"),this.toast.create({message:"JWT removed",duration:3e3}).then(e=>e.present())}editPage(){this.router.navigate(["/home/profile/edit-profile-page"])}changeProfilePicture(){console.log("Navigating to Change Profile Page"),this.router.navigate(["/home/profile/change-profile-picture",this.userObject.profilePicture])}updateResume(){console.log("Navigating to Change Resume Page"),this.router.navigate(["/home/profile/view-resume"])}confirmLogout(){return Object(a.a)(this,void 0,void 0,function*(){const e=this.toast.create({message:"User has been logged out",duration:3e3}),t=yield this.loading.create({message:"Logging out...",duration:1e3}),o=yield this.alert.create({header:"Logout",cssClass:"alert",message:"Are you sure you want to logout?",buttons:[{text:"Cancel",role:"cancel",handler:()=>{console.log("Canceling logout"),this.profile.fullName.next(""),this.profile.about.next(""),this.profile.city.next(""),this.profile.state.next(""),this.profile.zip.next(""),this.profile.gender.next(""),this.profile.dob.next(""),this.profile.school.next(""),this.profile.grade.next(""),this.profile.profilePicture.next(""),this.profile.resume.next(""),this.profile.email.next(""),this.router.navigate(["/home/profile"])}},{text:"Logout",handler:()=>{console.log("Logging out"),this.auth.logout(),t.present(),e.then(e=>e.present())}}]});yield o.present()})}changeEmail(){console.log("Navigating to Change Email Page"),this.router.navigate(["/home/profile/change-email"])}changePhone(){console.log("Navigating to Change Phone Page"),this.router.navigate(["/home/profile/change-phone"])}changeAbout(){console.log("Navigating to Change About Page"),this.router.navigate(["/home/profile/change-about/",this.userObject.about])}changePassword(){console.log("Navigating to Change Password Page"),this.router.navigate(["/home/profile/change-password"])}changePhoneNumber(){console.log("Navigating to Change Phone Number Page"),this.router.navigate(["/home/profile/change-phone",this.userObject.phone])}changeSchool(){console.log("Navigating to Change School Page"),this.router.navigate(["/home/profile/change-school",this.userObject.school,this.userObject.grade])}}return e.\u0275fac=function(t){return new(t||e)(u.Hb(l.a),u.Hb(h.a),u.Hb(b.b),u.Hb(n.g),u.Hb(i.eb),u.Hb(i.a),u.Hb(i.V))},e.\u0275cmp=u.Bb({type:e,selectors:[["app-profile"]],decls:74,vars:7,consts:[["no-border","",1,"ion-hide-lg-up"],[2,"--background","#0055a5"],["slot","start"],["height","50","src","../../../assets/icon/profile-icon.svg",2,"border-radius","80px"],[1,"ion-hide-lg-down","ion-justify-content-center",2,"padding-top","80px","margin-bottom","40px"],["size-xs","11","size-sm","10","size-md","10","size-lg","8","size-xl","7"],[1,"desktop-toolbar"],["height","50","src","../../../assets/icon/profile-icon-blue.svg","alt","","srcset",""],[1,"profile-wrapper","ion-justify-content-center","ion-align-items-center"],[2,"background","rgb(228, 235, 241)","padding","1em","border-radius","5px","box-shadow","1px 10px 26px rgba(0,0,0,0.05)"],["size-xs","11","size-sm","3","size-md","2","size-lg","1.5"],[1,"ion-justify-content-center"],["size","12"],["id","profile-picture","alt","User Profile Picture",3,"src"],["size","12",1,"ion-text-center"],[1,"blue-button",3,"click"],["size-xs","11","size-sm","6","size-md","5","size-lg","10","size-xl","5"],["id","profile-info","size","12"],[2,"text-transform","capitalize"],["detail","true","lines","none",3,"click"],["detail","true","lines","none",2,"--background","#e3405f","--color","white",3,"click"]],template:function(e,t){1&e&&(u.Mb(0,"ion-header",0),u.Mb(1,"ion-toolbar"),u.Mb(2,"ion-item",1),u.Mb(3,"ion-avatar",2),u.Ib(4,"img",3),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(5,"ion-content"),u.Mb(6,"ion-grid"),u.Mb(7,"ion-row",4),u.Mb(8,"ion-col",5),u.Mb(9,"ion-toolbar",6),u.Mb(10,"ion-buttons",2),u.Ib(11,"img",7),u.Mb(12,"h1"),u.nc(13,"Profile"),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(14,"ion-row",8),u.Mb(15,"ion-col",5),u.Mb(16,"ion-row",9),u.Mb(17,"ion-col",10),u.Mb(18,"ion-row",11),u.Mb(19,"ion-col",12),u.Ib(20,"img",13),u.Lb(),u.Mb(21,"ion-col",14),u.Mb(22,"ion-button",15),u.Ub("click",function(){return t.changeProfilePicture()}),u.nc(23," Change Picture "),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(24,"ion-col",16),u.Mb(25,"ion-row"),u.Mb(26,"ion-col",17),u.Mb(27,"p"),u.Mb(28,"span"),u.nc(29,"About"),u.Lb(),u.nc(30),u.Lb(),u.Mb(31,"p"),u.Mb(32,"span"),u.nc(33,"Name:"),u.Lb(),u.nc(34),u.Lb(),u.Mb(35,"p"),u.Mb(36,"span"),u.nc(37,"Email:"),u.Lb(),u.nc(38),u.Lb(),u.Mb(39,"p",18),u.Mb(40,"span"),u.nc(41,"Gender:"),u.Lb(),u.nc(42),u.Lb(),u.Mb(43,"p"),u.Mb(44,"span"),u.nc(45,"School:"),u.Lb(),u.nc(46),u.Lb(),u.Mb(47,"p"),u.Mb(48,"span"),u.nc(49,"Grade:"),u.Lb(),u.nc(50),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Mb(51,"ion-col",5),u.Mb(52,"ion-list"),u.Mb(53,"ion-item",19),u.Ub("click",function(){return t.changeEmail()}),u.Mb(54,"ion-label"),u.nc(55,"Change Email"),u.Lb(),u.Lb(),u.Mb(56,"ion-item",19),u.Ub("click",function(){return t.changeAbout()}),u.Mb(57,"ion-label"),u.nc(58,"Change About Description"),u.Lb(),u.Lb(),u.Mb(59,"ion-item",19),u.Ub("click",function(){return t.changePassword()}),u.Mb(60,"ion-label"),u.nc(61,"Change Password"),u.Lb(),u.Lb(),u.Mb(62,"ion-item",19),u.Ub("click",function(){return t.changePhoneNumber()}),u.Mb(63,"ion-label"),u.nc(64,"Change Phone Number"),u.Lb(),u.Lb(),u.Mb(65,"ion-item",19),u.Ub("click",function(){return t.changeSchool()}),u.Mb(66,"ion-label"),u.nc(67,"Change School/Grade"),u.Lb(),u.Lb(),u.Mb(68,"ion-item",19),u.Ub("click",function(){return t.updateResume()}),u.Mb(69,"ion-label"),u.nc(70,"View/Update Resume"),u.Lb(),u.Lb(),u.Mb(71,"ion-item",20),u.Ub("click",function(){return t.confirmLogout()}),u.Mb(72,"ion-label"),u.nc(73,"Logout"),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb(),u.Lb()),2&e&&(u.xb(20),u.ac("src",t.userObject.profilePicture,u.ic),u.xb(10),u.oc(t.userObject.about),u.xb(4),u.pc(" ",t.userObject.fullName,""),u.xb(4),u.pc(" ",t.userObject.email,""),u.xb(4),u.pc(" ",t.userObject.gender,""),u.xb(4),u.pc(" ",t.userObject.school,""),u.xb(4),u.pc(" ",t.userObject.grade,""))},directives:[i.u,i.S,i.x,i.d,i.o,i.t,i.I,i.n,i.h,i.g,i.C,i.B],styles:[".profile-wrapper[_ngcontent-%COMP%]{margin:16px auto}@media only screen and (max-width:575px){.profile-wrapper[_ngcontent-%COMP%]{margin:24px auto}}ion-alert[_ngcontent-%COMP%]{--background:#e4405f}ion-item[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{background:none}ion-item[_ngcontent-%COMP%]{--color:#0055a5;margin:8px auto;box-shadow:1px 10px 26px rgba(0,0,0,.05);border-radius:5px}.desktop-toolbar[_ngcontent-%COMP%]{--background:none;padding-bottom:16px;border-bottom:1px solid rgba(51,51,51,.14901960784313725)}.desktop-toolbar[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#0055a5}#profile-info[_ngcontent-%COMP%]{height:auto;text-align:left;margin-left:24px}h4[_ngcontent-%COMP%]{color:#000;font-size:1.9em}h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{opacity:1}p[_ngcontent-%COMP%]{font-size:1em;transition:.5s}span[_ngcontent-%COMP%]{color:#0055a5;font-weight:600;width:64px;display:inline-block}#profile-picture[_ngcontent-%COMP%]{height:80px;width:80px;border-radius:100px;margin:0 auto 8px;display:block;opacity:1;border:5px solid #0055a5}.back-button[_ngcontent-%COMP%]{opacity:1}.blue-button[_ngcontent-%COMP%]{--background:#0055a5;opacity:1}.blue-button[_ngcontent-%COMP%], .logout-button[_ngcontent-%COMP%]{height:24px;width:100px;font-size:.5em}.logout-button[_ngcontent-%COMP%]{color:#fff;--background:#e4405f;--background-hover:#dd3252;font-weight:600;box-shadow:1px 1px 10px rgba(0,0,0,.1);margin-bottom:52px auto}@-webkit-keyframes text-slide-up{0%{transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes text-slide-up{0%{transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes pic-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@keyframes pic-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes header-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@keyframes header-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@-webkit-keyframes buttons-slide-up{0%{transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes buttons-slide-up{0%{transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes buttons-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@keyframes buttons-slide-right{0%{transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}@media screen and (max-width:992px){p[_ngcontent-%COMP%]{font-size:1em}span[_ngcontent-%COMP%]{color:#0055a5;font-weight:600;width:64px;display:inline-block;text-align:left;margin-right:10px}}@media screen and (min-width:768px){#change-pro-pic-button[_ngcontent-%COMP%]{position:absolute;top:75px;left:188px}}"]}),e})();var g=o("zAgk");const d=[{path:"",component:p},{path:"change-email",loadChildren:()=>o.e(53).then(o.bind(null,"SmxB")).then(e=>e.ChangeEmailPageModule)},{path:"change-phone/:phone",loadChildren:()=>o.e(10).then(o.bind(null,"wpa0")).then(e=>e.ChangePhonePageModule)},{path:"change-password",loadChildren:()=>o.e(55).then(o.bind(null,"2uJy")).then(e=>e.ChangePasswordPageModule)},{path:"change-school/:school/:grade",loadChildren:()=>o.e(61).then(o.bind(null,"UWje")).then(e=>e.ChangeSchoolPageModule)},{path:"change-profile-picture/:profilePicture",loadChildren:()=>Promise.all([o.e(4),o.e(0),o.e(58)]).then(o.bind(null,"aGP+")).then(e=>e.ChangeProfilePicturePageModule)},{path:"resume",loadChildren:()=>o.e(66).then(o.bind(null,"wgOD")).then(e=>e.ResumePageModule)},{path:"logout",loadChildren:()=>o.e(64).then(o.bind(null,"GWPF")).then(e=>e.LogoutPageModule)},{path:"view-resume",loadChildren:()=>o.e(0).then(o.bind(null,"bUUK")).then(e=>e.ViewResumePageModule)},{path:"update-resume",loadChildren:()=>Promise.all([o.e(0),o.e(67)]).then(o.bind(null,"e0Xu")).then(e=>e.UpdateResumePageModule)},{path:"confirm-photo",loadChildren:()=>o.e(59).then(o.bind(null,"RA/u")).then(e=>e.ConfirmPhotoPageModule)},{path:"change-about/:about",loadChildren:()=>o.e(9).then(o.bind(null,"s+QV")).then(e=>e.ChangeAboutPageModule)},{path:"edit-profile-page",loadChildren:()=>o.e(63).then(o.bind(null,"J2g1")).then(e=>e.EditProfilePagePageModule)},{path:"change-about",loadChildren:()=>o.e(9).then(o.bind(null,"s+QV")).then(e=>e.ChangeAboutPageModule)},{path:"change-phone",loadChildren:()=>o.e(10).then(o.bind(null,"wpa0")).then(e=>e.ChangePhonePageModule)}];let m=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(t){return new(t||e)},imports:[[n.k.forChild(d)],n.k]}),e})(),f=(()=>{class e{}return e.\u0275mod=u.Fb({type:e}),e.\u0275inj=u.Eb({factory:function(t){return new(t||e)},imports:[[i.T,s.b,r.d,m,g.a,n.k.forChild([{path:"",component:p}])]]}),e})()},Aso2:function(e,t,o){"use strict";o.d(t,"a",function(){return g});var i=o("mrSG"),n=o("NuaS"),s=o("lGQG"),r=o("2Vo4"),a=o("JIr8"),l=o("AytR"),h=o("fXoL"),c=o("tk/3"),u=o("e8h1"),b=o("TEn/"),p=o("tyNb");let g=(()=>{class e{constructor(e,t,o,i,n,s,a){this.http=e,this.storage=t,this.alertController=o,this.helper=i,this.auth=n,this.router=s,this.toastController=a,this.BACKEND_URL=l.a.url,this.activeEmail="",this.fullName=new r.a(""),this.about=new r.a(""),this.city=new r.a(""),this.state=new r.a(""),this.zip=new r.a(""),this.gender=new r.a(""),this.dob=new r.a(""),this.school=new r.a(""),this.grade=new r.a(""),this.profilePicture=new r.a(""),this.resume=new r.a(""),this.email=new r.a(""),this.phone=new r.a(""),this.activeEmail=this.auth.user.email}getAllUsers(){return this.http.get(this.BACKEND_URL+"/api/home/user")}getUserDetails(){return this.http.post(this.BACKEND_URL+"/api/home/user",{email:this.activeEmail})}getTheirDetails(e){return this.http.post(this.BACKEND_URL+"/api/home/user/their-details",{email:e})}changeEmail(e,t){return this.http.post(this.BACKEND_URL+"/api/home/user/change-email",{oldEmail:this.activeEmail,email:e,password:t}).pipe(Object(a.a)(e=>{throw this.presentFailToast(this.activeEmail),new Error(e)})).subscribe(t=>{if(!0!==t)return this.presentFailToast(this.activeEmail),console.log("Passwords dont match");this.email.next(e),this.activeEmail=e,this.router.navigate(["/home/profile"]),this.presentSuccessToast()})}changePhone(e,t){return this.http.post(this.BACKEND_URL+"/api/home/user/change-phone",{email:this.email,newPhone:e,password:t}).pipe(Object(a.a)(e=>{throw this.presentFailToast(this.activeEmail),new Error(e)})).subscribe(t=>{if(!0!==t)return this.presentFailToast(this.activeEmail),console.log("Passwords dont match");this.phone.next(e),this.phone=e,this.router.navigate(["/home/profile"]),this.presentSuccessToast()})}presentSuccessToast(){this.toastController.create({message:"Your Email address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())}presentFailToast(e){this.toastController.create({message:"Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of "+e,duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present())}changePassword(e,t,o,n){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-password",{oldPassword:t,email:e,newPassword:o,reTypeNewPassword:n}).subscribe(e=>{!0===e?(console.log("TRUE"),this.router.navigate([""]),this.toastController.create({message:"Password updated. Please login with your new password.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())):console.log("Passwords dont match!")})})}changeAbout(e,t,o){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-about",{email:e,newAbout:t,passsword:o}).subscribe()})}changeSchool(e,t,o,n){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newSchool:t,newGrade:o,password:n}).subscribe(e=>{if(!0!==e)return this.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(e=>e.present()),console.log("Passwords dont match");this.school.next(t),this.grade.next(o),this.router.navigate(["/home/profile"]),this.toastController.create({message:"Your school information has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(e=>e.present())})})}changeProfilePicture(e,t){return Object(i.a)(this,void 0,void 0,function*(){return this.http.post(this.BACKEND_URL+"/api/photo/change-profile-picture",{imageForm:e,oldPhotoKey:t}).subscribe()})}changeResume(e,t,o){return Object(i.a)(this,void 0,void 0,function*(){return yield this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newResume:t,password:o}).subscribe(e=>{if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),this.resume.next(t),this.router.navigate(["/home/user/change-school/:school/:grade/confirm"])})})}delete(){console.log("Deleted User")}}return e.\u0275fac=function(t){return new(t||e)(h.Qb(c.b),h.Qb(u.b),h.Qb(b.a),h.Qb(n.b),h.Qb(s.a),h.Qb(p.g),h.Qb(b.eb))},e.\u0275prov=h.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);