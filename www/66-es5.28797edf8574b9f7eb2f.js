!function(){function e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[66,64,65],{Aso2:function(t,r,s){"use strict";s.d(r,"a",function(){return f});var n=s("mrSG"),o=s("NuaS"),a=s("lGQG"),i=s("2Vo4"),u=s("JIr8"),c=s("AytR"),h=s("fXoL"),l=s("tk/3"),p=s("e8h1"),d=s("TEn/"),m=s("tyNb"),f=function(){var t=function(){function t(e,r,s,n,o,a,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.http=e,this.storage=r,this.alertController=s,this.helper=n,this.auth=o,this.router=a,this.toastController=u,this.BACKEND_URL=c.a.url,this.activeEmail="",this.fullName=new i.a(""),this.about=new i.a(""),this.city=new i.a(""),this.state=new i.a(""),this.zip=new i.a(""),this.gender=new i.a(""),this.dob=new i.a(""),this.school=new i.a(""),this.grade=new i.a(""),this.profilePicture=new i.a(""),this.resume=new i.a(""),this.email=new i.a(""),this.activeEmail=this.auth.user.email}var r,s,o;return r=t,(s=[{key:"getAllUsers",value:function(){return this.http.get(this.BACKEND_URL+"/api/home/user")}},{key:"getUserDetails",value:function(){return this.http.post(this.BACKEND_URL+"/api/home/user",{email:this.activeEmail})}},{key:"getTheirDetails",value:function(e){return this.http.post(this.BACKEND_URL+"/api/home/user/their-details",{email:e})}},{key:"changeEmail",value:function(e,t,r){var s=this;return this.http.post(this.BACKEND_URL+"/api/home/user/change-email",{oldEmail:this.activeEmail,email:t,password:r}).pipe(Object(u.a)(function(e){throw s.presentFailToast(s.activeEmail),new Error(e)})).subscribe(function(e){if(!0!==e)return s.presentFailToast(s.activeEmail),console.log("Passwords dont match");s.email.next(t),s.activeEmail=t,s.router.navigate(["/home/profile"]),s.presentSuccessToast()})}},{key:"presentSuccessToast",value:function(){this.toastController.create({message:"Your Email address has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})}},{key:"presentFailToast",value:function(e){this.toastController.create({message:"Password and Email combination do not work. Make sure that your password is correct, and that your new email is different from your current email address of "+e,duration:9e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(function(e){return e.present()})}},{key:"changePassword",value:function(e,t,r,s){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-password",{oldPassword:t,email:e,newPassword:r,reTypeNewPassword:s}).subscribe(function(e){!0===e?(console.log("TRUE"),o.router.navigate([""]),o.toastController.create({message:"Password updated. Please login with your new password.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})):console.log("Passwords dont match!")});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"changeAbout",value:function(e,t,r){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark(function s(){return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-about",{email:e,newAbout:t,passsword:r}).subscribe();case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},s,this)}))}},{key:"changeSchool",value:function(e,t,r,s){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){var o=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newSchool:t,newGrade:r,password:s}).subscribe(function(e){if(!0!==e)return o.toastController.create({message:"Please make sure your password is correct",duration:3e3,cssClass:"wrong-password-toast",keyboardClose:!0,position:"top"}).then(function(e){return e.present()}),console.log("Passwords dont match");o.school.next(t),o.grade.next(r),o.router.navigate(["/home/profile"]),o.toastController.create({message:"Your school information has been updated.",duration:3e3,cssClass:"updated-toast",keyboardClose:!0,position:"bottom"}).then(function(e){return e.present()})});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n,this)}))}},{key:"changeProfilePicture",value:function(e,t){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.http.post(this.BACKEND_URL+"/api/photo/change-profile-picture",{imageForm:e,oldPhotoKey:t}).subscribe());case 1:case"end":return r.stop()}},r,this)}))}},{key:"changeResume",value:function(e,t,r){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark(function s(){var n=this;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,this.http.post(this.BACKEND_URL+"/api/home/user/change-school",{email:e,newResume:t,password:r}).subscribe(function(e){if(!0!==e)return console.log("Passwords dont match");console.log("Changing Resume..."),n.resume.next(t),n.router.navigate(["/home/user/change-school/:school/:grade/confirm"])});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},s,this)}))}},{key:"delete",value:function(){console.log("Deleted User")}}])&&e(r.prototype,s),o&&e(r,o),t}();return t.\u0275fac=function(e){return new(e||t)(h.Qb(l.b),h.Qb(p.b),h.Qb(d.a),h.Qb(o.b),h.Qb(a.a),h.Qb(m.f),h.Qb(d.Z))},t.\u0275prov=h.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()}}])}();