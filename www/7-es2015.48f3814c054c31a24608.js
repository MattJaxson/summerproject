(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{veoP:function(e,t,o){"use strict";o.r(t),o.d(t,"EnterCodePageModule",function(){return u});var n=o("ofXK"),s=o("3Pt+"),r=o("TEn/"),i=o("tyNb"),a=o("mrSG"),c=o("lGQG"),d=o("fXoL");function l(e,t){if(1&e&&(d.Mb(0,"div",14),d.mc(1),d.Lb()),2&e){const e=d.Wb().$implicit;d.xb(1),d.oc(" ",e.message," ")}}function b(e,t){if(1&e&&(d.Kb(0),d.lc(1,l,2,1,"div",13),d.Jb()),2&e){const e=t.$implicit,o=d.Wb();d.xb(1),d.Zb("ngIf",o.enterCodeForm.get("code").hasError(e.type)&&(o.enterCodeForm.get("code").dirty||o.enterCodeForm.get("code").touched))}}const m=[{path:"",component:(()=>{class e{constructor(e,t,o,n,s){this.router=e,this.formBuilder=t,this.auth=o,this.activatedRoute=n,this.toast=s,this.code="",this.userEmail="",this.validationMessasges={code:[{type:"text",message:"The codes do not match"}]}}ngOnInit(){this.enterCodeForm=this.formBuilder.group({code:["",s.n.required]}),this.userEmail=this.activatedRoute.snapshot.paramMap.get("email"),this.generateCode(6).then(e=>{this.auth.sendEmailWithCodeForgotPassword(e,this.userEmail)}),this.formOnChanges()}formOnChanges(){console.log(this.enterCodeForm),this.enterCodeForm.valueChanges.subscribe(e=>{console.log(e)})}generateCode(e){return Object(a.a)(this,void 0,void 0,function*(){let t="";const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=o.length;for(let s=0;s<e;s++)t+=o.charAt(Math.floor(Math.random()*n));return console.log("Generated Code: "+t),this.code=t})}newPasswordPage(e){console.log("New Password: "),console.log(e),this.enterCodeForm.controls.code.value!==this.code?(this.presentToast(),console.log("Codes do not match")):(console.log("Codes matched"),this.router.navigate(["/enter-email/enter-code/:email/new-password",this.userEmail]))}sendNewCode(){return Object(a.a)(this,void 0,void 0,function*(){yield this.generateCode(6).then(e=>{console.log("Data: "+e),this.auth.sendEmailWithCode(e,this.userEmail)}),yield this.presentNewCodeToast(this.userEmail)})}presentToast(){return Object(a.a)(this,void 0,void 0,function*(){(yield this.toast.create({message:"The codes do not match. Please try again.",duration:2e3})).present()})}presentNewCodeToast(e){return Object(a.a)(this,void 0,void 0,function*(){(yield this.toast.create({message:"New Code sent to "+e,duration:2e3,cssClass:"success-toast",keyboardClose:!0,position:"top"})).present()})}cancel(){console.log("Forgot password cancelled"),this.router.navigate([""])}}return e.\u0275fac=function(t){return new(t||e)(d.Hb(i.f),d.Hb(s.a),d.Hb(c.a),d.Hb(i.a),d.Hb(r.Z))},e.\u0275cmp=d.Bb({type:e,selectors:[["app-enter-code"]],decls:23,vars:3,consts:[[2,"display","none"],[1,"ion-text-center",2,"margin-top","10%"],["size-sm","10","size-lg","6","offset-lg","3","offset-sm","1"],[1,"text-header"],[2,"font-weight","700"],[3,"formGroup","ngSubmit"],[1,"line-input"],["placeholder","Enter Code","required","","formControlName","code","type","text","placeholder","Enter Code"],[1,"validation-errors"],[4,"ngFor","ngForOf"],["type","submit",1,"orange-button"],[1,"send-new-code",3,"click"],["slot","end",1,"cancel-button",3,"click"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(d.Ib(0,"ion-header",0),d.Mb(1,"ion-content"),d.Mb(2,"ion-grid",1),d.Mb(3,"ion-row"),d.Mb(4,"ion-col",2),d.Mb(5,"h6",3),d.mc(6,"Please enter "),d.Mb(7,"span",4),d.mc(8,"6 character code"),d.Lb(),d.mc(9),d.Lb(),d.Mb(10,"form",5),d.Ub("ngSubmit",function(){return t.newPasswordPage(t.enterCodeForm.value)}),d.Mb(11,"ion-list",6),d.Mb(12,"ion-item"),d.Ib(13,"ion-input",7),d.Lb(),d.Mb(14,"div",8),d.lc(15,b,2,1,"ng-container",9),d.Lb(),d.Mb(16,"ion-button",10),d.mc(17,"ENTER CODE"),d.Lb(),d.Ib(18,"br"),d.Mb(19,"ion-button",11),d.Ub("click",function(){return t.sendNewCode()}),d.mc(20," Send new code "),d.Lb(),d.Mb(21,"ion-button",12),d.Ub("click",function(){return t.cancel()}),d.mc(22," cancel "),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb(),d.Lb()),2&e&&(d.xb(9),d.oc(" that was sent to ",t.userEmail,""),d.xb(1),d.Zb("formGroup",t.enterCodeForm),d.xb(5),d.Zb("ngForOf",t.validationMessasges.code))},directives:[r.u,r.o,r.t,r.G,r.n,s.o,s.j,s.c,r.C,r.x,r.w,r.Y,s.m,s.i,s.b,n.i,r.g,n.j],styles:[".send-new-code[_ngcontent-%COMP%]{display:block;--background:none;color:#005191;--border-color:#005191;--border-width:1px;--border-style:solid;border:1px;width:150px;margin:50px auto;opacity:0;-webkit-animation:slide-from-right 1s ease-out 5s forwards;animation:slide-from-right 1s ease-out 5s forwards}span[_ngcontent-%COMP%]{font-weight:900;font-size:1.2em;color:#005191}@-webkit-keyframes slide-from-right{0%{transform:translateX(300px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes slide-from-right{0%{transform:translateX(300px);opacity:0}to{transform:translateX(0);opacity:1}}"]}),e})()},{path:"new-password/:email",loadChildren:()=>o.e(26).then(o.bind(null,"PJsJ")).then(e=>e.NewPasswordPageModule)}];let h=(()=>{class e{}return e.\u0275mod=d.Fb({type:e}),e.\u0275inj=d.Eb({factory:function(t){return new(t||e)},imports:[[i.j.forChild(m)],i.j]}),e})(),u=(()=>{class e{}return e.\u0275mod=d.Fb({type:e}),e.\u0275inj=d.Eb({factory:function(t){return new(t||e)},imports:[[n.b,s.d,s.l,r.Q,h]]}),e})()}}]);