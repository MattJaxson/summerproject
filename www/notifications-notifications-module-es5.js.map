{"version":3,"sources":["webpack:///src/app/pages/posts/notifications/notifications.page.html","webpack:///src/app/pages/posts/notifications/notifications-routing.module.ts","webpack:///src/app/pages/posts/notifications/notifications.module.ts","webpack:///src/app/pages/posts/notifications/notifications.page.ts","webpack:///src/app/pages/posts/notifications/notifications.page.scss"],"names":["routes","path","component","NotificationsPageRoutingModule","imports","forChild","exports","NotificationsPageModule","declarations","NotificationsPage","notifications","profile","console","log","notificationsSub","unsubscribe","initSub","getUserDetails","subscribe","userDetails","userEmail","getNotifications","notifications$","next","Object","values","data","allNotifications","n","date","Date","includeSeconds","addSuffix","clearNotifications","notification","selector","template"],"mappings":"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","file":"notifications-notifications-module-es5.js","sourcesContent":["export default \" <!-- Mobile Toolbar -->\\n <ion-header class=\\\"ion-hide-lg-up\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button></ion-back-button>\\n      <ion-title>Notifications</ion-title>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-button style=\\\"--background: linear-gradient(rgba(6, 114, 196, 0.3), rgba(0, 81, 145, 0.2)); --color: #005191; margin-right: 20px; width: 80px;\\\" (click)=\\\"clear()\\\">\\n        Clear\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content>\\n\\n  <!-- No Messages -->\\n  <ion-row *ngIf=\\\"this.allNotifications == 0\\\" class=\\\"ion-justify-content-center\\\">\\n    <ion-col class=\\\"margin-top ion-text-center\\\" size-xs=\\\"11\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n      <h3 id=\\\"no-notifications\\\">You have no notifications</h3>\\n      <img id=\\\"icon\\\" src=\\\"../../../../assets/icons/no-notifications-icon.svg\\\" alt=\\\"\\\">\\n    </ion-col>\\n  </ion-row>\\n  <ion-row *ngIf=\\\"this.allNotifications > 0\\\" class=\\\"ion-justify-content-center\\\">\\n    <ion-col size-xs=\\\"11\\\" size-sm=\\\"10\\\" size-md=\\\"10\\\" size-lg=\\\"8\\\" size-xl=\\\"6\\\">\\n      <!-- List of Sliding Items -->\\n      <ion-list>\\n        <ion-item-sliding (click)=\\\"goTo()\\\" *ngFor=\\\"let n of allNotifications\\\">\\n          <ion-item>\\n            <ion-avatar>\\n              <img [src]=\\\"n.instigatingUserProfilePicture\\\" />\\n            </ion-avatar>\\n            <p id=\\\"message\\\">{{n.message}}</p>\\n            <p id=\\\"date\\\">{{n.date}}</p>\\n          </ion-item>\\n          <ion-item-options side=\\\"end\\\">\\n            <ion-item-option (click)=\\\"delete(n)\\\">Delete</ion-item-option>\\n          </ion-item-options>\\n        </ion-item-sliding>\\n      </ion-list>\\n    </ion-col>\\n  </ion-row>\\n\\n\\n\\n</ion-content>\\n\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationsPage } from './notifications.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationsPageRoutingModule } from './notifications-routing.module';\n\nimport { NotificationsPage } from './notifications.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificationsPageRoutingModule\n  ],\n  declarations: [NotificationsPage]\n})\nexport class NotificationsPageModule {}\n","import { Component, OnInit, AfterContentChecked, OnDestroy} from '@angular/core';\nimport { NotificationsService } from 'src/app/services/notifications.service';\nimport { ProfileService } from 'src/app/services/profile.service';\nimport { formatDistanceToNow } from 'date-fns';\nimport { Subscription } from 'rxjs';\n\n\n\n@Component({\n  selector: 'app-notifications',\n  templateUrl: './notifications.page.html',\n  styleUrls: ['./notifications.page.scss'],\n})\nexport class NotificationsPage implements OnInit, AfterContentChecked, OnDestroy {\n  userEmail;\n  allNotifications;\n  initSub: Subscription;\n  notificationsSub: Subscription;\n\n  constructor(\n    private notifications: NotificationsService,\n    private profile: ProfileService\n  ) { }\n\n  ngAfterContentChecked() {\n    console.log('Notification Added on backend');\n  }\n\n  ngOnDestroy() {\n    this.notificationsSub.unsubscribe();\n  }\n\n  ngOnInit() {\n    this.initSub = this.profile.getUserDetails()\n      .subscribe(\n        userDetails => {\n          this.userEmail = userDetails['email'];\n          console.log(this.userEmail);\n\n          this.notificationsSub = this.notifications.getNotifications(this.userEmail)\n            .subscribe(\n              notifications => {\n                  console.log(notifications);\n                  this.notifications.notifications$.next(Object.values(notifications));\n                  this.notifications.notifications$.subscribe( data => {\n                    this.allNotifications = Object.values(data);\n                    for (let n of this.allNotifications) {\n                    n.date = formatDistanceToNow( new Date(n.date), {\n                      includeSeconds: true,\n                      addSuffix: false\n                    });\n\n                  }\n                });\n\n                  // TODO: replaces 'minutes' with M\n                  // let minutes = ;\n                }\n            );\n        }\n      );\n  }\n\n  clear() {\n    this.notifications.clearNotifications(this.userEmail)\n    .subscribe(\n      data => {\n\n        this.notificationsSub = this.notifications.getNotifications(this.userEmail)\n          .subscribe(\n            notifications => {\n                console.log(notifications);\n                this.notifications.notifications$.next(Object.values(notifications));\n                this.notifications.notifications$.subscribe( data => {\n                  this.allNotifications = Object.values(data);\n                  for (let n of this.allNotifications) {\n                  n.date = formatDistanceToNow( new Date(n.date), {\n                    includeSeconds: true,\n                    addSuffix: false\n                  });\n\n                }\n              });\n\n                // TODO: replaces 'minutes' with M\n                // let minutes = ;\n              }\n          );\n      }\n    );\n  }\n\n  goTo() {\n    console.log('Going to page from notification');\n  }\n\n  delete(notification) {\n    console.log('Deleting notification');\n  }\n\n\n}\n","export default \"p {\\n  font-size: 0.7em;\\n  margin-left: 10px;\\n}\\n\\n#date {\\n  opacity: 0.5;\\n  display: inline-block;\\n}\\n\\n#icon {\\n  opacity: 0.2;\\n}\\n\\n#no-notifications {\\n  opacity: 0.3;\\n}\\n\\n.margin-top {\\n  margin-top: 15%;\\n}\\n\\n.blue-button {\\n  width: 100px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL25vdGlmaWNhdGlvbnMucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQUE7RUFDQSxpQkFBQTtBQUNGOztBQUtBO0VBQ0UsWUFBQTtFQUNBLHFCQUFBO0FBRkY7O0FBS0E7RUFDRSxZQUFBO0FBRkY7O0FBS0E7RUFDRSxZQUFBO0FBRkY7O0FBS0E7RUFDRSxlQUFBO0FBRkY7O0FBS0E7RUFDRSxZQUFBO0FBRkYiLCJmaWxlIjoibm90aWZpY2F0aW9ucy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJwIHtcbiAgZm9udC1zaXplOiAwLjdlbTtcbiAgbWFyZ2luLWxlZnQ6IDEwcHg7XG59XG5cbiNtZXNzYWdlIHtcbn1cblxuI2RhdGUge1xuICBvcGFjaXR5OiAwLjU7XG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbn1cblxuI2ljb24ge1xuICBvcGFjaXR5OiAwLjI7XG59XG5cbiNuby1ub3RpZmljYXRpb25zIHtcbiAgb3BhY2l0eTogMC4zO1xufVxuXG4ubWFyZ2luLXRvcCB7XG4gIG1hcmdpbi10b3A6IDE1JTtcbn1cblxuLmJsdWUtYnV0dG9uIHtcbiAgd2lkdGg6IDEwMHB4O1xufSJdfQ== */\";"]}