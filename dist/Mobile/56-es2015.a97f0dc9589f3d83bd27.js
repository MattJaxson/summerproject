(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"aGP+":function(t,e,o){"use strict";o.r(e),o.d(e,"ChangeProfilePicturePageModule",function(){return w});var i=o("ofXK"),n=o("3Pt+"),r=o("TEn/"),a=o("tyNb"),s=o("mrSG"),c=o("Aso2"),d=o("6/gD"),l=o("AytR"),p=o("1tJ+"),b=o("DtjX"),u=o("wbj2"),h=o("fXoL");function g(t,e){if(1&t&&h.Ib(0,"img",17),2&t){const t=h.Wb();h.ac("src",t.imageUrl,h.hc)}}function f(t,e){if(1&t&&h.Ib(0,"img",17),2&t){const t=h.Wb();h.ac("src",t.uploadedPhotoURL,h.hc)}}const m=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n,r,a,s,c){this.photo=t,this.router=e,this.profile=o,this.alert=i,this.modal=n,this.toast=r,this.loading=a,this.postEmitter=s,this.singlePostEmitterService=c,this.imageUrl=this.profile.profilePicture.getValue(),this.uploadedPhoto=!1,this.awsPrefix=this.imageUrl.slice(-51),this.BACKEND_URL=l.a.url}ngOnInit(){this.profile.getUserDetails().subscribe(t=>{this.userEmail=t.email,console.log(this.userEmail)})}getFormData(t){return Object(s.a)(this,void 0,void 0,function*(){const e=document.querySelectorAll("form");yield e.forEach(t=>{"changePhotoForm"===t.id&&(console.log("Got Form: "+t),this.formData=new FormData(t),this.uploadedPhoto=!0)}),console.log(this.formData);let o=new FileReader;if(yield o.addEventListener("load",()=>Object(s.a)(this,void 0,void 0,function*(){this.uploadedPhotoURL=o.result,console.log("Before cropping: "+o.result),yield this.cropPhoto(this.uploadedPhotoURL)}),!0),e)return o.readAsDataURL(t.target.files[0])})}uploadChangedPhoto(){const t=new FormData;t.append("oldPhotoKey",this.awsPrefix),t.append("email",this.userEmail);const e=new File([this.dataURLtoBlob(this.uploadedPhotoURL)],"picture.png");t.append("profile-picture-update",e),!0===this.uploadedPhoto&&this.photo.changeProfilePicture(t).subscribe(t=>{console.log(t);let e=t.objectUrl;this.presentLoading(),this.profile.profilePicture.next(e),this.presentToast(),this.postEmitter.postPageRefresh(),this.singlePostEmitterService.singlePostPageRefresh(),this.router.navigate(["/home/profile"])})}presentToast(){return Object(s.a)(this,void 0,void 0,function*(){(yield this.toast.create({message:"Your Profile Picture has been changed",animated:!0,cssClass:"updated-toast",duration:2e3})).present()})}presentLoading(){return Object(s.a)(this,void 0,void 0,function*(){const t=yield this.loading.create({cssClass:"my-custom-class",message:"Updating Photo...",duration:1e3});yield t.present(),yield t.onDidDismiss(),console.log("Loading dismissed!")})}cropPhoto(t){return Object(s.a)(this,void 0,void 0,function*(){const e=yield this.modal.create({component:p.a,cssClass:"image-cropper",componentProps:{uploadedPhotoURL:t}});yield e.present(),e.onDidDismiss().then(t=>{this.uploadedPhotoURL=t.data})})}dataURLtoBlob(t){let e=t.split(","),o=e[0].match(/:(.*?);/)[1],i=atob(e[1]),n=i.length,r=new Uint8Array(n);for(;n--;)r[n]=i.charCodeAt(n);return new Blob([r],{type:o})}back(){this.router.navigate(["/home/profile"])}}return t.\u0275fac=function(e){return new(e||t)(h.Hb(d.a),h.Hb(a.f),h.Hb(c.a),h.Hb(r.a),h.Hb(r.T),h.Hb(r.Z),h.Hb(r.S),h.Hb(b.a),h.Hb(u.a))},t.\u0275cmp=h.Bb({type:t,selectors:[["app-change-profile-picture"]],decls:31,vars:3,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"ion-text-center"],[1,"ion-hide-md-down",2,"margin","5% 0% 3% 0%"],["offset","2","size","3.5"],["push","2","size","2"],["expand","block",1,"blue-button",3,"click"],[1,"ion-justify-content-center","ion-hide-md-down"],["size","6"],[2,"background-color","#00000044"],[1,"ion-justify-content-center"],["size-xs","11","size-sm","10","size-md","8","size-lg","6",2,"margin-top","50px"],[1,"text-header"],["id","profile-picture","alt","Profile Picture",3,"src",4,"ngIf"],["id","changePhotoForm",3,"ngSubmit"],["name","profile-picture-update","placeholder","Upload Image","type","file",3,"change"],["type","submit",1,"orange-button",3,"disabled"],["id","profile-picture","alt","Profile Picture",3,"src"]],template:function(t,e){1&t&&(h.Mb(0,"ion-header",0),h.Mb(1,"ion-toolbar"),h.Mb(2,"ion-buttons",1),h.Ib(3,"ion-back-button"),h.Lb(),h.Mb(4,"ion-title"),h.lc(5,"Change Profile Picture"),h.Lb(),h.Lb(),h.Lb(),h.Mb(6,"ion-content",2),h.Mb(7,"ion-grid"),h.Mb(8,"ion-row",3),h.Mb(9,"ion-col",4),h.Mb(10,"h1"),h.lc(11,"Change Profile Picture"),h.Lb(),h.Lb(),h.Mb(12,"ion-col",5),h.Mb(13,"ion-button",6),h.Ub("click",function(){return e.back()}),h.lc(14," Back "),h.Lb(),h.Lb(),h.Lb(),h.Mb(15,"ion-row",7),h.Mb(16,"ion-col",8),h.Ib(17,"hr",9),h.Lb(),h.Lb(),h.Mb(18,"ion-row",10),h.Mb(19,"ion-col",11),h.Mb(20,"h6",12),h.lc(21,"Please select the profile picture you will use to replace your current one. Only pictures with the extentions "),h.Mb(22,"span"),h.lc(23,"'.png', '.jpg', and '.jpeg'"),h.Lb(),h.lc(24," are allowed. "),h.Lb(),h.kc(25,g,1,1,"img",13),h.kc(26,f,1,1,"img",13),h.Mb(27,"form",14),h.Ub("ngSubmit",function(){return e.uploadChangedPhoto()}),h.Mb(28,"input",15),h.Ub("change",function(t){return e.getFormData(t)}),h.Lb(),h.Mb(29,"ion-button",16),h.lc(30,"Update "),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb(),h.Lb()),2&t&&(h.xb(25),h.Zb("ngIf",!e.uploadedPhoto),h.xb(1),h.Zb("ngIf",e.uploadedPhoto),h.xb(3),h.Zb("disabled",!e.imageUrl))},directives:[r.u,r.P,r.h,r.e,r.f,r.O,r.o,r.t,r.G,r.n,r.g,i.i,n.o,n.j,n.k],styles:["#profile-picture[_ngcontent-%COMP%]{height:100px;width:100px;border-radius:100px;margin:50px auto;display:block;opacity:0;border:2px solid #005191;-webkit-animation:pic-slide-right .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards;animation:pic-slide-right .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards}.orange-button[_ngcontent-%COMP%]{width:unset;display:block;margin:40px auto;width:200px}.blue-button[_ngcontent-%COMP%]{width:200px}.skip-button[_ngcontent-%COMP%]{display:block;--background:none;color:#888;--border-color:#888;--border-width:3px;--border-style:solid;width:200px;margin:40px auto;opacity:.5}.blue-button[_ngcontent-%COMP%], .skip-button[_ngcontent-%COMP%]{-webkit-animation:none;animation:none}.blue-button[_ngcontent-%COMP%]{width:unset;opacity:unset}.wrapper[_ngcontent-%COMP%]{box-shadow:1px 1px 10px rgba(0,0,0,.1);height:auto;padding:50px}#default-picture-wrapper[_ngcontent-%COMP%]{height:100px;width:100px;margin:20px auto 50px;border-radius:50px;background-image:url(default-pro-picture.682aee7d81e75d081b1c.svg);opacity:0;-webkit-animation:slide-up .5s cubic-bezier(.175,.885,.32,1) .5s forwards;animation:slide-up .5s cubic-bezier(.175,.885,.32,1) .5s forwards}#upload-picture-wrapper[_ngcontent-%COMP%]{height:100px;width:100px;border:4px solid #005191;margin:0 auto 50px;border-radius:50px;-webkit-animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards;animation:slide-up .5s cubic-bezier(.175,.885,.32,1.275) .5s forwards}span[_ngcontent-%COMP%]{color:#ffb351;font-weight:600;background:#222;padding:6px;line-height:1.5em;border-radius:5px}#next-button[_ngcontent-%COMP%]{width:100%;height:60px;background:#d3d3d3;position:absolute;bottom:0;font-size:1em}.text-header[_ngcontent-%COMP%]{font-size:1.2em;padding:unset;color:#333}.cancel-button[_ngcontent-%COMP%]{color:#e4405f;--background:none;--background-hover:none;height:50px;width:200px;box-shadow:1px 1px 10px rgba(0,0,0,.1);transition:.5s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275)}.cancel-button[_ngcontent-%COMP%]:hover{box-shadow:1px 1px 10px rgba(0,0,0,.4)}.camera-button[_ngcontent-%COMP%]{--background:#fff;--color:#005191;--border-style:solid;--border-width:1px;--border-color:#005191;border:1px;margin:30px auto}input[type=file][_ngcontent-%COMP%]{color:#fff;font-size:1.2em;font-weight:600;border:1px solid #005191;background:linear-gradient(#0672c4,#005191);width:400px;height:50px;border-radius:5px;padding:20px 0 0 20px;text-align:center;cursor:pointer}input[type=file][_ngcontent-%COMP%]::-webkit-file-upload-button{visibility:hidden}#img-wrapper[_ngcontent-%COMP%]{height:150px;width:150px;margin:50px auto}@-webkit-keyframes lide-up{0%{transform:translateY(100px)}to{transform:translateY(0);opacity:1}}@keyframes lide-up{0%{transform:translateY(100px)}to{transform:translateY(0);opacity:1}}"]}),t})()},{path:"confirm",loadChildren:()=>o.e(58).then(o.bind(null,"TY5D")).then(t=>t.ConfirmPageModule)}];let P=(()=>{class t{}return t.\u0275mod=h.Fb({type:t}),t.\u0275inj=h.Eb({factory:function(e){return new(e||t)},imports:[[a.j.forChild(m)],a.j]}),t})();var x=o("Scpy");let w=(()=>{class t{}return t.\u0275mod=h.Fb({type:t}),t.\u0275inj=h.Eb({factory:function(e){return new(e||t)},imports:[[i.b,n.d,r.Q,P,x.ImageCropperPageModule]]}),t})()}}]);