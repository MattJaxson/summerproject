!function(){function n(n,e){var i;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(i=function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(n,e)}(n))||e&&n&&"number"==typeof n.length){i&&(n=i);var o=0,r=function(){};return{s:r,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,s=!0,a=!1;return{s:function(){i=n[Symbol.iterator]()},n:function(){var n=i.next();return s=n.done,n},e:function(n){a=!0,c=n},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw c}}}}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{no2t:function(t,o,r){"use strict";r.r(o),r.d(o,"GoingPageModule",function(){return O});var c=r("ofXK"),s=r("3Pt+"),a=r("TEn/"),b=r("tyNb"),u=r("mrSG"),l=r("riPR"),g=r("Aso2"),f=r("sWYD"),v=r("7xvl"),d=r("xcW5"),m=r("fXoL");function h(n,t){1&n&&(m.Mb(0,"ion-row",8),m.Mb(1,"ion-col",11),m.Mb(2,"p"),m.mc(3,"You have no events saved in My Events list."),m.Lb(),m.Lb(),m.Lb())}function p(n,t){if(1&n){var e=m.Nb();m.Mb(0,"ion-row",12),m.Mb(1,"ion-col",13),m.Ib(2,"img",14),m.Lb(),m.Mb(3,"ion-col",15),m.Mb(4,"p"),m.mc(5),m.Lb(),m.Mb(6,"p"),m.mc(7),m.Lb(),m.Mb(8,"p"),m.mc(9),m.Lb(),m.Lb(),m.Mb(10,"ion-col",16),m.Mb(11,"ion-button",17),m.Ub("click",function(){m.gc(e);var n=t.$implicit;return m.Wb().eventPage(n)}),m.mc(12," Details "),m.Lb(),m.Mb(13,"ion-button",18),m.Ub("click",function(){m.gc(e);var n=t.$implicit;return m.Wb().presentAlertMultipleButtons(n._id)}),m.mc(14," Cancel "),m.Lb(),m.Lb(),m.Lb()}if(2&n){var i=t.$implicit;m.xb(5),m.nc(i.title),m.xb(2),m.nc(i.time),m.xb(2),m.nc(i.date)}}function y(n,t){1&n&&(m.Mb(0,"ion-row",8),m.Mb(1,"ion-col",11),m.Mb(2,"p"),m.mc(3,"You have no events saved in My Events list."),m.Lb(),m.Lb(),m.Lb())}function M(n,t){if(1&n){var e=m.Nb();m.Mb(0,"ion-card"),m.Ib(1,"img",19),m.Mb(2,"ion-card-header",20),m.Ub("click",function(){m.gc(e);var n=t.$implicit;return m.Wb().eventPage(n)}),m.Mb(3,"ion-card-title"),m.mc(4),m.Lb(),m.Mb(5,"ion-card-subtitle"),m.mc(6),m.Lb(),m.Mb(7,"ion-card-subtitle"),m.mc(8),m.Lb(),m.Mb(9,"ion-card-subtitle"),m.mc(10),m.Lb(),m.Lb(),m.Mb(11,"ion-card-content",21),m.Mb(12,"ion-button",17),m.Ub("click",function(){m.gc(e);var n=t.$implicit;return m.Wb().eventPage(n)}),m.mc(13," Details "),m.Lb(),m.Mb(14,"ion-button",18),m.Ub("click",function(){m.gc(e);var n=t.$implicit;return m.Wb().cancel(n._id)}),m.mc(15," Cancel "),m.Lb(),m.Lb(),m.Lb()}if(2&n){var i=t.$implicit;m.xb(4),m.nc(i.title),m.xb(2),m.nc(i.time),m.xb(2),m.nc(i.date),m.xb(2),m.pc(" ",i.city,", ",i.state,"")}}var L,w,x,E=[{path:"",component:(L=function(){function t(n,i,o,r,c,s,a,b){e(this,t),this.router=n,this.events=i,this.profile=o,this.cdr=r,this.toast=c,this.alert=s,this.eventEmitterService=a,this.location=b,this.goingToEvents=[]}var o,r,c;return o=t,(r=[{key:"ngOnDestroy",value:function(){this.profileSub.unsubscribe(),this.eventsGoingSub.unsubscribe()}},{key:"ngOnInit",value:function(){var n=this;this.location.onPopState(function(){n.eventEmitterService.onBackAction()}),this.profileSub=this.profile.getUserDetails().subscribe(function(t){n.id=t._id,n.userEmail=t.email,n.eventsGoingSub=n.events.eventsGoing$.subscribe(function(t){n.goingToEvents=t}),console.log("getting event user "+n.id+" is going to"),n.refreshGoingEvents()})}},{key:"eventPage",value:function(n){this.router.navigate(["/home/events/events-page",n._id,n.title,n.addressOne,n.addressOne,n.city,n.state,n.zip,n.dateCreated,n.date,n.time,n.photo,n.description])}},{key:"goBack",value:function(){this.eventEmitterService.onBackAction(),this.router.navigate(["/home/events"])}},{key:"cancel",value:function(n){var t=this;console.log(n),console.log("Removing ".concat(n," from this Users eventsGoing property")),this.cancelSub=this.events.notGoingToEvent(n,this.userEmail,this.id).subscribe(function(e){for(var i=t.events.eventsGoing$.getValue(),o=0;o<i.length;o++)i[o]===n&&i.splice(o,1);console.log(i),t.goingToEvents=i,t.events.eventsGoing$.next(i),t.eventEmitterService.resetEvents(),t.presentNotGoingToast()})}},{key:"refreshGoingEvents",value:function(){var t=this;this.eventsGoingSub=this.events.getEventsGoing(this.id).subscribe(function(e){t.goingToEvents=Object.values(e),t.goingToEvents.reverse(),console.log("Updated events going list: "+t.goingToEvents);var i,o=n(t.goingToEvents);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.date=Object(f.a)(new Date(r.date),"MMMM dd, yyyy"),r.time=Object(f.a)(new Date(r.date),"hh:mm a"),r.dateCreated=Object(v.a)(new Date(r.dateCreated),{includeSeconds:!0,addSuffix:!0})}}catch(c){o.e(c)}finally{o.f()}})}},{key:"presentNotGoingToast",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.toast.create({message:'You are no longer going to event. It has been removed from your "Going" list',duration:2e3});case 2:n.sent.present();case 3:case"end":return n.stop()}},n,this)}))}},{key:"presentAlertMultipleButtons",value:function(n){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alert.create({header:"Are you sure you want to delete this from My Events?",buttons:[{text:"Yes",handler:function(){return i.cancel(n),!0}},{text:"Cancel",role:"cancel",handler:function(){console.log("confirm cancel")}}]});case 2:return e=t.sent,t.next=5,e.present();case 5:case"end":return t.stop()}},t,this)}))}}])&&i(o.prototype,r),c&&i(o,c),t}(),L.\u0275fac=function(n){return new(n||L)(m.Hb(b.f),m.Hb(l.a),m.Hb(g.a),m.Hb(m.i),m.Hb(a.Z),m.Hb(a.a),m.Hb(d.a),m.Hb(c.l))},L.\u0275cmp=m.Bb({type:L,selectors:[["app-going"]],decls:22,vars:4,consts:[[1,"ion-hide-lg-up"],["slot","start"],[1,"ion-hide-md-down"],[1,"ion-justify-content-center","ion-align-items-center",2,"margin-top","5%"],["pull",".1","size","8",1,"ion-align-self-center"],[1,"ion-float-right","blue-button",2,"position","relative","top","-40px",3,"click"],["class","ion-justify-content-center",4,"ngIf"],["class","ion-justify-content-center","style","margin-top: 5%;",4,"ngFor","ngForOf"],[1,"ion-justify-content-center"],["size-xs","12","size-sm","10","size-md","9"],[4,"ngFor","ngForOf"],["size","10",1,"ion-text-center",2,"margin-top","3%"],[1,"ion-justify-content-center",2,"margin-top","5%"],["size","2"],["src","../assets/Journi_flyer.jpg",1,"thumbnail"],["size","4"],["size","2",1,"ion-text-center"],[1,"grey-button",3,"click"],[1,"orange-button",3,"click"],["src","../assets/Journi_flyer.jpg"],[3,"click"],[1,"ion-text-center"]],template:function(n,t){1&n&&(m.Mb(0,"ion-header",0),m.Mb(1,"ion-toolbar"),m.Mb(2,"ion-buttons",1),m.Ib(3,"ion-back-button"),m.Lb(),m.Mb(4,"ion-title"),m.mc(5,"My Events"),m.Lb(),m.Lb(),m.Lb(),m.Mb(6,"ion-content"),m.Mb(7,"ion-grid",2),m.Mb(8,"ion-row",3),m.Mb(9,"ion-col",4),m.Mb(10,"div"),m.Mb(11,"h1"),m.mc(12,"My Events"),m.Lb(),m.Lb(),m.Mb(13,"ion-button",5),m.Ub("click",function(){return t.goBack()}),m.mc(14," Go Back "),m.Lb(),m.Lb(),m.Lb(),m.lc(15,h,4,0,"ion-row",6),m.lc(16,p,15,3,"ion-row",7),m.Lb(),m.Mb(17,"ion-grid",0),m.lc(18,y,4,0,"ion-row",6),m.Mb(19,"ion-row",8),m.Mb(20,"ion-col",9),m.lc(21,M,16,5,"ion-card",10),m.Lb(),m.Lb(),m.Lb(),m.Lb()),2&n&&(m.xb(15),m.Zb("ngIf",0===t.goingToEvents.length),m.xb(1),m.Zb("ngForOf",t.goingToEvents),m.xb(2),m.Zb("ngIf",0===t.goingToEvents.length),m.xb(3),m.Zb("ngForOf",t.goingToEvents))},directives:[a.u,a.P,a.h,a.e,a.f,a.O,a.o,a.t,a.G,a.n,a.g,c.j,c.i,a.i,a.k,a.m,a.l,a.j],styles:["ion-title[_ngcontent-%COMP%]{margin:0}.thumbnail[_ngcontent-%COMP%]{width:200px}p[_ngcontent-%COMP%]{font-size:1.2em;color:#999}hr[_ngcontent-%COMP%]{border:1px solid #999}ion-card[_ngcontent-%COMP%]{margin-top:5%}ion-card-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{width:47%}ion-card-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:first-child{margin-right:5px}ion-card-content[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){margin-left:5px}"]}),L)}],k=((x=function n(){e(this,n)}).\u0275mod=m.Fb({type:x}),x.\u0275inj=m.Eb({factory:function(n){return new(n||x)},imports:[[b.j.forChild(E)],b.j]}),x),O=((w=function n(){e(this,n)}).\u0275mod=m.Fb({type:w}),w.\u0275inj=m.Eb({factory:function(n){return new(n||w)},imports:[[c.b,s.d,a.Q,k]]}),w)}}])}();