(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"9bWj":function(l,n,e){"use strict";e.d(n,"a",(function(){return t})),e("nfbU");var t=function(){return function(){}}()},fU57:function(l,n,e){"use strict";e.d(n,"a",(function(){return t}));var t=function(){return function(){}}()},nfbU:function(l,n,e){"use strict";e.d(n,"a",(function(){return s}));var t=e("mrSG"),u=(e("ZZ/e"),e("Aso2"),e("ENZJ"),e("7xvl")),i=e("26FU"),s=(e("DtjX"),function(){function l(l,n,e,t,u,s,o,r){this.formBuilder=l,this.modal=n,this.navParams=e,this.loading=t,this.profile=u,this.posts=s,this.alert=o,this.postEmitterService=r,this.replies$=new i.a([]),this.tabBar=document.getElementById("myTabBar"),this.votes=document.getElementById("votes")}return l.prototype.ngOnInit=function(){var l=this;this.profile.getUserDetails().subscribe((function(n){l.userProfilePicture=n.profilePicture})),this.repliesForm=this.formBuilder.group({reply:[""]}),this.replies$.next(this.navParams.get("replies").reverse()),this.replies$.subscribe((function(n){l.replies=n;for(var e=0,t=l.replies;e<t.length;e++){var u=t[e];u.isEditable=!1,console.log("Reply: ",u),u.userEmail==l.userEmail&&(u.isEditable=!0)}})),this.postID=this.navParams.get("postID"),this.commentContents=this.navParams.get("comment"),this.commentID=this.navParams.get("commentID"),this.commentUserFullName=this.navParams.get("commentUserFullName"),this.commentUserEmail=this.navParams.get("commentUserEmail"),this.commentDate=this.navParams.get("commentDate"),this.userFullName=this.navParams.get("userFullName"),this.userEmail=this.navParams.get("userEmail")},l.prototype.cancel=function(){console.log("cancelling comment..."),this.modal.dismiss()},l.prototype.refreshRepliesAmount=function(){this.postEmitterService.postPageRefresh()},l.prototype.reply=function(l){return t.b(this,void 0,void 0,(function(){var n=this;return t.e(this,(function(e){switch(e.label){case 0:return[4,this.repliesForm.reset()];case 1:return e.sent(),[4,console.log("replying to comment...")];case 2:return e.sent(),[4,this.posts.replyComment(this.commentID,this.postID,l.reply,this.userFullName,this.userEmail,this.userProfilePicture,this.commentUserFullName,this.commentUserEmail).subscribe((function(l){for(var e=[],t=0,i=l.comments;t<i.length;t++)if((p=i[t])._id==l.comment)for(var s=0;s<p.replies.length;s++)e.push(p.replies[s]);for(var o=l.comments,r=l.userEmail,a=l.replies,c=0,b=o;c<b.length;c++){var p;for((p=b[c]).repliesLength=p.replies.length,p.isUser=!1,p.canDeleteComment=!1,p.canReport=!0,p.date=Object(u.a)(new Date(p.date),{includeSeconds:!1,addSuffix:!1}),p.userEmail===r&&(p.isUser=!0,p.canDeleteComment=!0,p.canReport=!1),s=0;p.replies.length>s;s++)p.replies[s].date=Object(u.a)(new Date(p.replies[s].date),{addSuffix:!1}),a.push(p.replies[s])}n.replies=e,n.posts.commentsSubject$.next(o.reverse()),n.replies$.next(n.replies.reverse())}))];case 3:return e.sent(),[4,this.repliesLoading()];case 4:return e.sent(),[2]}}))}))},l.prototype.deleteReply=function(l){return t.b(this,void 0,void 0,(function(){var n=this;return t.e(this,(function(e){switch(e.label){case 0:return console.log("Deleting reply with id ",l),[4,this.posts.deleteReply(l,this.commentID,this.postID).subscribe((function(l){console.log(l);for(var e=[],t=l.comments,i=l.userEmail,s=l.replies,o=0,r=t;o<r.length;o++)if((p=r[o])._id==l.comment)for(var a=0;a<p.replies.length;a++)e.push(p.replies[a]);for(var c=0,b=t;c<b.length;c++){var p;for((p=b[c]).repliesLength=p.replies.length,p.isUser=!1,p.canDeleteComment=!1,p.canReport=!0,p.date=Object(u.a)(new Date(p.date),{includeSeconds:!1,addSuffix:!1}),p.userEmail==i&&(p.isUser=!0,p.canDeleteComment=!0,p.canReport=!1),a=0;p.replies.length>a;a++)p.replies[a].date=Object(u.a)(new Date(p.replies[a].date),{addSuffix:!1}),s.push(p.replies[a])}n.replies=e,n.posts.commentsSubject$.next(t.reverse()),n.replies$.next(n.replies.reverse())}))];case 1:return e.sent(),[2]}}))}))},l.prototype.repliesLoading=function(){return t.b(this,void 0,void 0,(function(){var l;return t.e(this,(function(n){switch(n.label){case 0:return[4,this.loading.create({message:"Replying to Comment...",duration:2e3})];case 1:return l=n.sent(),[4,this.refreshRepliesAmount()];case 2:return n.sent(),[4,l.present()];case 3:return n.sent(),[4,l.onDidDismiss()];case 4:return n.sent(),console.log("Loading dismissed!"),[2]}}))}))},l.prototype.confirmAlert=function(){return t.b(this,void 0,void 0,(function(){return t.e(this,(function(l){switch(l.label){case 0:return[4,this.alert.create({cssClass:"success-alert",message:"Your comment has been edited.",buttons:["OK"]})];case 1:return[4,l.sent().present()];case 2:return l.sent(),[2]}}))}))},l.prototype.ScrollToTop=function(){this.content.scrollToPoint(0,140,100),this.tabBar.style.height="0px",this.votes.style.height="0px"},l.prototype.ScrollToReply=function(){this.content.scrollToPoint(0,300,100),this.textarea.getInputElement().then((function(l){l.blur()}))},l.prototype.onBlur=function(){var l=this;this.textarea.getInputElement().then((function(n){l.tabBar.style.height="70px",l.votes.style.height="70px"}))},l.prototype.blur=function(){var l=this;this.textarea.getInputElement().then((function(n){n.blur(),l.tabBar.style.height="70px",l.votes.style.height="70px"}))},l}())},sQ9i:function(l,n,e){"use strict";var t=e("CcnG"),u=e("oBZk"),i=e("ZZ/e"),s=e("Ip0R"),o=e("gIcY"),r=e("nfbU"),a=e("Aso2"),c=e("ENZJ"),b=e("DtjX");e.d(n,"a",(function(){return f}));var p=t.rb({encapsulation:0,styles:[[".reply-input[_ngcontent-%COMP%]{background:#fff;height:auto;margin:20px 0;box-shadow:none;border:1px solid rgba(0,81,145,.4);border-radius:5px;padding-left:10px;-webkit-transition:.5s linear;transition:.5s;transition-timing-function:linear}.reply-input[_ngcontent-%COMP%]:hover{background:rgba(250,167,27,.02);height:auto;box-shadow:1px 1px 3px #999;border:1px solid #005191;border-radius:5px;padding-left:10px;-webkit-transition:.5s cubic-bezier(.175,.885,.32,1.275);transition:.5s;transition-timing-function:cubic-bezier(.175,.885,.32,1.275)}ion-button[type=submit][_ngcontent-%COMP%]{--color:white;--background:linear-gradient(#24d8a8, #1baf88)}.blue-button[_ngcontent-%COMP%]{width:unset;height:36px;font-size:.85em;-webkit-animation:none;animation:none;opacity:unset}.reply-wrapper[_ngcontent-%COMP%]{padding:10px}#reply-avatar[_ngcontent-%COMP%]{height:30px;width:30px;border-radius:50px;position:relative;right:15px}.reply-name[_ngcontent-%COMP%]{font-weight:700;margin:.5em 0}#reply-date[_ngcontent-%COMP%]{font-size:.7em;color:#999}#back-arrow-icons[_ngcontent-%COMP%]{font-size:1.5em;position:relative;left:24px;top:8px}"]],data:{}});function h(l){return t.Nb(0,[(l()(),t.tb(0,0,null,null,2,"ion-button",[["class","blue-button"],["expand","block"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.deleteReply(l.parent.context.$implicit._id)&&t),t}),u.O,u.d)),t.sb(1,49152,null,0,i.k,[t.h,t.k,t.z],{expand:[0,"expand"]},null),(l()(),t.Lb(-1,0,[" Delete "]))],(function(l,n){l(n,1,0,"block")}),null)}function m(l){return t.Nb(0,[(l()(),t.tb(0,0,null,null,18,"ion-row",[["class","ion-justify-content-center ion-align-items-start reply-wrapper"]],null,null,null,u.kb,u.z)),t.sb(1,49152,null,0,i.jb,[t.h,t.k,t.z],null,null),(l()(),t.tb(2,0,null,0,2,"ion-col",[["size","1"]],null,null,null,u.V,u.k)),t.sb(3,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(4,0,null,0,0,"img",[["id","reply-avatar"]],[[8,"src",4]],null,null,null,null)),(l()(),t.tb(5,0,null,0,5,"ion-col",[["size","5"]],null,null,null,u.V,u.k)),t.sb(6,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(7,0,null,0,1,"p",[["class","reply-name"]],null,null,null,null,null)),(l()(),t.Lb(8,null,["",""])),(l()(),t.tb(9,0,null,0,1,"p",[["class","reply-text"]],null,null,null,null,null)),(l()(),t.Lb(10,null,["",""])),(l()(),t.tb(11,0,null,0,3,"ion-col",[["size","1.5"]],null,null,null,u.V,u.k)),t.sb(12,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(13,0,null,0,1,"p",[["id","reply-date"]],null,null,null,null,null)),(l()(),t.Lb(14,null,["",""])),(l()(),t.tb(15,0,null,0,3,"ion-col",[["size","2"]],null,null,null,u.V,u.k)),t.sb(16,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.ib(16777216,null,0,1,null,h)),t.sb(18,16384,null,0,s.j,[t.O,t.L],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,3,0,"1"),l(n,6,0,"5"),l(n,12,0,"1.5"),l(n,16,0,"2"),l(n,18,0,n.context.$implicit.isEditable)}),(function(l,n){l(n,4,0,t.xb(1,"",n.context.$implicit.userProfilePicture,"")),l(n,8,0,n.context.$implicit.userFullName),l(n,10,0,n.context.$implicit.reply),l(n,14,0,n.context.$implicit.date)}))}function d(l){return t.Nb(0,[t.Jb(402653184,1,{content:0}),t.Jb(402653184,2,{textarea:0}),(l()(),t.tb(2,0,null,null,11,"ion-header",[["class","ion-hide-md-down"]],null,null,null,u.cb,u.r)),t.sb(3,49152,null,0,i.B,[t.h,t.k,t.z],null,null),(l()(),t.tb(4,0,null,0,9,"ion-toolbar",[],null,null,null,u.vb,u.K)),t.sb(5,49152,null,0,i.Cb,[t.h,t.k,t.z],null,null),(l()(),t.tb(6,0,null,0,2,"ion-title",[["slot","start"]],null,null,null,u.ub,u.J)),t.sb(7,49152,null,0,i.Ab,[t.h,t.k,t.z],null,null),(l()(),t.Lb(-1,0,["Replies"])),(l()(),t.tb(9,0,null,0,4,"ion-buttons",[["slot","end"]],null,null,null,u.P,u.e)),t.sb(10,49152,null,0,i.l,[t.h,t.k,t.z],null,null),(l()(),t.tb(11,0,null,0,2,"ion-button",[],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.cancel()&&t),t}),u.O,u.d)),t.sb(12,49152,null,0,i.k,[t.h,t.k,t.z],null,null),(l()(),t.Lb(-1,0,[" cancel "])),(l()(),t.tb(14,0,null,null,8,"ion-header",[["class","ion-hide-lg-up"]],null,null,null,u.cb,u.r)),t.sb(15,49152,null,0,i.B,[t.h,t.k,t.z],null,null),(l()(),t.tb(16,0,null,0,6,"ion-toolbar",[],null,null,null,u.vb,u.K)),t.sb(17,49152,null,0,i.Cb,[t.h,t.k,t.z],null,null),(l()(),t.tb(18,0,null,0,1,"ion-icon",[["id","back-arrow-icons"],["name","arrow-back"]],null,[[null,"click"]],(function(l,n,e){var t=!0;return"click"===n&&(t=!1!==l.component.cancel()&&t),t}),u.db,u.s)),t.sb(19,49152,null,0,i.C,[t.h,t.k,t.z],{name:[0,"name"]},null),(l()(),t.tb(20,0,null,0,2,"ion-title",[["slot","end"]],null,null,null,u.ub,u.J)),t.sb(21,49152,null,0,i.Ab,[t.h,t.k,t.z],null,null),(l()(),t.Lb(-1,0,["Replies"])),(l()(),t.tb(23,0,null,null,46,"ion-content",[],null,null,null,u.W,u.l)),t.sb(24,49152,[[1,4]],0,i.u,[t.h,t.k,t.z],null,null),(l()(),t.tb(25,0,null,0,12,"ion-row",[["class","ion-justify-content-center"]],null,null,null,u.kb,u.z)),t.sb(26,49152,null,0,i.jb,[t.h,t.k,t.z],null,null),(l()(),t.tb(27,0,null,0,10,"ion-col",[["size","11"]],null,null,null,u.V,u.k)),t.sb(28,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(29,0,null,0,8,"ion-item",[["lines","none"]],null,null,null,u.fb,u.u)),t.sb(30,49152,null,0,i.H,[t.h,t.k,t.z],{lines:[0,"lines"]},null),(l()(),t.tb(31,0,null,0,2,"ion-avatar",[["class","comment-avatar"],["slot","start"]],null,null,null,u.M,u.b)),t.sb(32,49152,null,0,i.f,[t.h,t.k,t.z],null,null),(l()(),t.tb(33,0,null,0,0,"img",[["src","../../../../assets/aaron.jpg"]],null,null,null,null,null)),(l()(),t.tb(34,0,null,0,3,"ion-label",[],null,null,null,u.gb,u.v)),t.sb(35,49152,null,0,i.N,[t.h,t.k,t.z],null,null),(l()(),t.tb(36,0,null,0,1,"h6",[["style","opacity: 0.5"]],null,null,null,null,null)),(l()(),t.Lb(37,null,[""," - "," "])),(l()(),t.tb(38,0,null,0,5,"ion-row",[["class","ion-justify-content-center"]],null,null,null,u.kb,u.z)),t.sb(39,49152,null,0,i.jb,[t.h,t.k,t.z],null,null),(l()(),t.tb(40,0,null,0,3,"ion-col",[["size","11"]],null,null,null,u.V,u.k)),t.sb(41,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(42,0,null,0,1,"p",[],null,null,null,null,null)),(l()(),t.Lb(43,null,["",""])),(l()(),t.tb(44,0,null,0,18,"ion-row",[["class","ion-justify-content-center"]],null,null,null,u.kb,u.z)),t.sb(45,49152,null,0,i.jb,[t.h,t.k,t.z],null,null),(l()(),t.tb(46,0,null,0,16,"ion-col",[["size","11"]],null,null,null,u.V,u.k)),t.sb(47,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(48,0,null,0,14,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(l,n,e){var u=!0,i=l.component;return"submit"===n&&(u=!1!==t.Fb(l,50).onSubmit(e)&&u),"reset"===n&&(u=!1!==t.Fb(l,50).onReset()&&u),"ngSubmit"===n&&(u=!1!==(i.repliesForm.value.reply.length>0?i.reply(i.repliesForm.value)&&i.ScrollToReply():null)&&u),u}),null,null)),t.sb(49,16384,null,0,o.t,[],null,null),t.sb(50,540672,null,0,o.d,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t.Ib(2048,null,o.a,null,[o.d]),t.sb(52,16384,null,0,o.l,[[4,o.a]],null,null),(l()(),t.tb(53,0,null,null,6,"ion-textarea",[["autocapitalize","true"],["autogrow","true"],["class","reply-input"],["formControlName","reply"],["placeholder","Reply to this comment"],["rows","5"],["spellcheck","true"],["type","text"],["wrap","soft"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ionFocus"],[null,"ionBlur"],[null,"onfocusout"],[null,"keydown.control.enter"],[null,"ionChange"]],(function(l,n,e){var u=!0,i=l.component;return"ionBlur"===n&&(u=!1!==t.Fb(l,54)._handleBlurEvent(e.target)&&u),"ionChange"===n&&(u=!1!==t.Fb(l,54)._handleInputEvent(e.target)&&u),"ionFocus"===n&&(u=!1!==i.ScrollToTop()&&u),"ionBlur"===n&&(u=!1!==i.onBlur()&&u),"onfocusout"===n&&(u=!1!==i.blur()&&u),"keydown.control.enter"===n&&(u=!1!==(i.repliesForm.value.reply.length>0?i.reply(i.repliesForm.value)&&i.ScrollToReply():null)&&u),u}),u.tb,u.I)),t.sb(54,16384,null,0,i.Ob,[t.k],null,null),t.Ib(1024,null,o.i,(function(l){return[l]}),[i.Ob]),t.sb(56,671744,null,0,o.c,[[3,o.a],[8,null],[8,null],[6,o.i],[2,o.s]],{name:[0,"name"]},null),t.Ib(2048,null,o.j,null,[o.c]),t.sb(58,16384,null,0,o.k,[[4,o.j]],null,null),t.sb(59,49152,[[2,4]],0,i.yb,[t.h,t.k,t.z],{autocapitalize:[0,"autocapitalize"],placeholder:[1,"placeholder"],rows:[2,"rows"],spellcheck:[3,"spellcheck"],wrap:[4,"wrap"]},null),(l()(),t.tb(60,0,null,null,2,"ion-button",[["expand","block"],["type","submit"]],null,null,null,u.O,u.d)),t.sb(61,49152,null,0,i.k,[t.h,t.k,t.z],{expand:[0,"expand"],type:[1,"type"]},null),(l()(),t.Lb(-1,0,[" Reply "])),(l()(),t.tb(63,0,null,0,4,"ion-row",[["class","ion-justify-content-center"]],null,null,null,u.kb,u.z)),t.sb(64,49152,null,0,i.jb,[t.h,t.k,t.z],null,null),(l()(),t.tb(65,0,null,0,2,"ion-col",[["size","11"]],null,null,null,u.V,u.k)),t.sb(66,49152,null,0,i.t,[t.h,t.k,t.z],{size:[0,"size"]},null),(l()(),t.tb(67,0,null,0,0,"hr",[["style","background-color: #999; opacity: 0.4; margin: 20px 0 20px 0;"]],null,null,null,null,null)),(l()(),t.ib(16777216,null,0,1,null,m)),t.sb(69,278528,null,0,s.i,[t.O,t.L,t.s],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var e=n.component;l(n,19,0,"arrow-back"),l(n,28,0,"11"),l(n,30,0,"none"),l(n,41,0,"11"),l(n,47,0,"11"),l(n,50,0,e.repliesForm),l(n,56,0,"reply"),l(n,59,0,"true","Reply to this comment","5","true","soft"),l(n,61,0,"block","submit"),l(n,66,0,"11"),l(n,69,0,e.replies)}),(function(l,n){var e=n.component;l(n,37,0,e.commentUserFullName,e.commentDate),l(n,43,0,e.commentContents),l(n,48,0,t.Fb(n,52).ngClassUntouched,t.Fb(n,52).ngClassTouched,t.Fb(n,52).ngClassPristine,t.Fb(n,52).ngClassDirty,t.Fb(n,52).ngClassValid,t.Fb(n,52).ngClassInvalid,t.Fb(n,52).ngClassPending),l(n,53,0,t.Fb(n,58).ngClassUntouched,t.Fb(n,58).ngClassTouched,t.Fb(n,58).ngClassPristine,t.Fb(n,58).ngClassDirty,t.Fb(n,58).ngClassValid,t.Fb(n,58).ngClassInvalid,t.Fb(n,58).ngClassPending)}))}function g(l){return t.Nb(0,[(l()(),t.tb(0,0,null,null,1,"app-replies-page",[],null,null,null,d,p)),t.sb(1,114688,null,0,r.a,[o.b,i.Hb,i.Jb,i.Gb,a.a,c.a,i.a,b.a],null,null)],(function(l,n){l(n,1,0)}),null)}var f=t.pb("app-replies-page",r.a,g,{},{},[])}}]);